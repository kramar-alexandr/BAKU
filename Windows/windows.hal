external function string 60 UserDefined(string,string);external function Boolean HasLimitedAccess();external function Boolean IsEnterprise();remote function boolean CompanyIsJWLikeCompany(Integer); //Edit***************************Sasha2,16:05 17.08.2017SetLangMode(LangRussian,"RUS",0);  window IV1DClass:2  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real h,h1,h2,h3,h4,hm,hs,t,v,v2,v3,vm,vs;  string 255 label,tstr;// Edit ************************** Tuesday, 4 December 2012 10:28:40  WindowBegin("Счет-фактура клиенту",IVDClass,CGview,-);  //Sizeable(-1,-1,0,0);  UseView(IVVc);  ActiveFieldOnNew("OfficialSerNr");    SetWRect(20,80,750,500);  //CommunicateButton;  EditField(75,vm=(v=6),95,"Номер",ViewOnly,SerNr,false,TSerSClass);  EditField(75,v+=20,95,"Клиент",ViewOnly,CustCode,false,CUSClass);  EnterSkip(PayDeal);  EditField(h=255,v=vm,-40,"Наим.",ViewOnly,Addr0,false,0);  EditField(h,vm=(v+=20),135,"Оф.номер",Normal,OfficialSerNr,false,LegalInvNrSClass);  //CheckBox(h4=-100,v,0,"OK",OKFlag);  vs = 20;  label = UserDefined("CUVc","InvAddr0");  if (blank(label)) then begin label = "Сч/ф"; end;  EditField(h=75,v=90,-40,label,Normal,Addr1,false,0);  label = UserDefined("CUVc","InvAddr1");  if (blank(label)) then begin label = "адрес"; end;  EditField(h,v+=vs, -40,label,Normal,Addr2,false,0);  label = UserDefined("CUVc","InvAddr2");  EditField(h,v+=vs, -40,label,Normal,Addr3,false,0);  label = UserDefined("CUVc","InvAddr3");  EditField(h,v+=vs, -40,label,Normal,InvAddr3,false,0);  label = UserDefined("CUVc","InvAddr4");  EditField(h,v+=vs, -40,label,Normal,InvAddr4,false,0);  EditField(h,vm=(v+=vs),80,"ИНН",Normal,VATNr,false,0);  EndWindow;end;window IV1LClass:8 //Edit***************************Sasha2,15:52 23.12.2014 {  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  WindowBegin("Счета-фактуры",IV1LClass,CGmlist,-);    SetWRect(20,80,800,298);    Sizeable(-1,-1,0,0);    SpawnClass(IV1DClass);    UseView(IVVc);    FormName(PrintIVL);    RecordList(4,17,-21,-39);    RlColKey(4,4,"Но.",SerNr,false,SerNr);    RlColKey(79,79,"ОК",OKFlag,false,OKFlag);    RlColKey(111,111,"Дата сч/ф",InvDate,false,InvDate);    RlColKey(191,191,"Склад",Location,false,Location);      RlColKey(301,301,"Счет Но.",OrderNr,false,OrderNr);  RlColKey(381,381,"Клиент",CustCode,false,CustCode);   RlColKey(441,441,"Наим.",Addr0,false,Name);     RlColKey(-110,-110,"Итого",Sum4,true,Sum4);    RlCol(-39,-39,"",CredMark,true);    RlCol(-30,-30,"Вал.",CurncyCode,true);    RlCol(-1,-1,"",Invalid,true);    SearchField("Найти");  if (HasLimitedAccess) then begin     BrowseSubsetButton(-40,-15);  end;    SpecialMenu("OK",'G',0,"OKIVLsm");    SpecialMenu("Печатать проформу cчета-фактуры",' ',1,"PrintIVLsm");    SpecialMenu("Статус сч/ф",'r',2,"IVInfoIVLsm");    EndWindow;end; //Edit***************************Sasha2,15:52 23.12.2014 }/* UNCLEAR WHAT MYIVDCLASS IS NEED FOR //Edit***************************Sasha2,16:17 17.08.2017window MYIVDClass:2  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real h,h1,h2,h3,h4,hm,hs,t,v,v2,v3,vm,vs;  string 255 label,tstr;// Edit ************************** Tuesday, 4 December 2012 10:28:40  WindowBegin("Счет-фактура клиенту",MYIVDClass,CGview,-);  Sizeable(-1,-1,0,0);  UseView(IVVc);if (HasTouchScreenLook==false) then begin  ActiveFieldOnNew("CustCode");    SetWRect(20,80,750,460);  CommunicateButton;  Tile(0,74,false,"",CustCode);  EditField(75,vm=(v=6),95,"Номер",Normal,SerNr,false,TSerSClass);  EditField(75,v+=20,95,"Клиент",Normal,CustCode,false,CUSClass);  EnterSkip(PayDeal);  EditField(h=255,v=vm,-40,"Наим.",Normal,Addr0,false,0);  EditField(h,vm=(v+=20),135,"Оф.номер",Normal,OfficialSerNr,false,LegalInvNrSClass);  CheckBox(h4=-100,v,0,"OK",OKFlag);  TileButton(1,"Сроки");  TileButton(2,"Товары");  TileButton(3,"Валюта");  TileButton(4,"Условия отгр.");  TileButton(5,"Идентификаторы");  TileButton(6,"Прайс-лист");  TileButton(7,"Адрес сч/ф");  TileButton(8,"Адрес дост.");  Tile(1,110,false,"1",InvDate);  vs = 20; h1 = 110; h2 = 290; h3 = 530; h4 = -100;  EditField(h1,vm=(v=6),82,"Дата с/ф",Normal,InvDate,false,PasteCurDate);  EditField(h1,v+=vs,25,"Условия оплаты",Normal,PayDeal,false,PDSClass);//PDMSClass);  EditField(h1,v+=vs,82,"Дата оплаты",Normal,PayDate,false,PasteCurDate);  EditField(h1,v+=vs,82,"Дата операции",Normal,TransDate,false,PasteCurDate);  EditField(h2,v=vm,135,"Ответственный",Normal,OurContact,false,0);  EditField(h2,v+=vs,135,"Внимание",Normal,ClientContact,false,ContactSClass);  EditField(h2,v+=vs,135,"Объекты",Normal,Objects,false,ObjSClass);  EditField(h2,v+=vs,135,"Рекомендатель",Normal,RefStr,false,0);  EditField(h2,v+=vs,135,"№ счета клиенту",Normal,CustOrdNr,false,0);  EditField(h3,v=vm,80,"Продавец",Normal,SalesMan,false,SalesmanSClass);  EditField(h3,v+=vs,80,"Лок. машина",Normal,MachineName,false,LocalMachineSClass);// Edit ************************** Monday, 15 April 2013 12:00:16  EditField(h3,v+=vs,80,"Сдача",Normal,RetValue,false,0);// Edit ************************** Monday, 15 April 2013 12:00:16    //EditField(h3,v+=vs,-20,"Комментарий",Normal,InvComment,false,0);  //EditField(h3,v+=vs,80,"Лок. машина",Normal,MachineName,false,LocalMachineSClass);  //EditField(h3,v+=vs,80,"Проект",Normal,PRCode,false,0);  //CheckBox(h4,v=6,0,"Спорные",DisputedFlag);  EnterSkip(Math);  Tile(2,220,true,"2",Math);  //  CheckBox(20,-20,0,"OK",OKFlag);  EditField(55,-41,50,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass);  if (UserCanAction("ViewCostPrice",true)) then begin    //EditField(160,-41,70,"GP %",Normal,GPProc,true,0);    EditField(160,-21,70,"Итого прибыль",ViewOnly,TotGP,true,0);  end;  EditField(290,-41,70,"Налог2",ViewOnly,TAX2Sum,true,0);  EditField(290,-21,70,"Вн. нал.",ViewOnly,TAX1Sum,true,0);  EditField(410,-41,95,"НДС",ViewOnly ,Sum3,true,0);  EditField(410,-21,95,"База",ViewOnly,BaseSum4,true,0);  EditField(-150,-41,95,"Пром. итог",ViewOnly ,Sum1,true,0);  EditField(-150,-21,95,"Итого",ViewOnly ,Sum4,true,0);  v = 24;  MatrixBegin(4,v,-50,-49,-,200);  MatTypedRow(stp);  Flip(0);  MatCol(t=kInvoiceRowTypeNormal,32,"Товар",0,ArtCode,false,INSClass);  //  MatCol(t,94,"Var",0,VARList,true,VARSClass);  //  MatCol(t,144,"Qty",0,Quant,true,0);  if (HasVarieties) then begin  MatCol(t,94,"Кол-во",0,Quant,true,MATVARINSClass);  end else begin    MatCol(t,94,"Кол-во",0,Quant,true,0);   end;  EnterSkip(ArtCode);  MatCol(t=kInvoiceRowTypeStructuredItemComponent,32,"Товар",0,ArtCode,false,INSClass);  if (HasVarieties) then begin  MatCol(t,94,"Кол-во",0,Quant,true,MATVARINSClass);  end else begin    MatCol(t,94,"Кол-во",0,Quant,true,0);   end;  EnterSkip(ArtCode);  MatText(t=kInvoiceRowTypeCredit,32,"Кредитовать сч/ф",true);  MatCol(t,208,"",0,OrdRow,false,ARSClass);  MatCol(t,-216,"",0,Spec,false,0);//MatText(t,-216,"",true);  MatText(t=kInvoiceRowTypeInterest,32,"Пеня",true);  MatCol(t,98,"",0,ArtCode,false,0);  MatCol(t,153,"",0,Quant,true,0);  MatCol(t,188,"",0,Spec,false,0);  MatText(t=kInvoiceRowTypeDownpayment,32,"Авансовый платеж",true);  MatColTL(t,122,"",0,-1,ViewOnly,0,ArtCode,true,0);   MatColTL(t,188,"",0,-1,ViewOnly,0,Quant,true,0);  MatCol(t,238,"",0,Spec,false,0);  MatColTL(t,-170,"",0,-1,Normal,0,Sum,true,0); //?? TL?  if (UseTaxTemplatesforTaxCalc) then begin    MatCol(t,-100,"",0,SalesAcc,false,AccSClass);    MatCol(t,-54,"",0,TaxTemplateCode,false,TaxTemplateSClass);  end else begin    MatCol(t,-70,"",0,SalesAcc,false,AccSClass);    MatCol(t,-24,"",0,VATCode,false,VATCodeSClass);  end;  MatText(t=kInvoiceRowTypePrepayment,32,"Номер предоплаты",true);  MatCol(t,170,"",0,CUPNr,true,ARPay2SClass);  MatCol(t,-300,"",0,BasePrice,false,0);  MatCol(t,-170,"",0,Price,true,0);// Price holds the VAT sum, Recipe holds the date of prepaym.   MatCol(t,-100,"",0,Sum,true,0);    MatText(t=kInvoiceRowTypeLoan,32,"Займ",true);  MatCol(t,98,"",0,CuAccCode,true,CuAccSClass);  MatCol(t,-350,"",0,SalesAcc,true,AccSClass);  MatCol(t,-230,"",0,Objects,false,0);  MatCol(t,-110,"",0,Sum,true,0);  MatCol(t,-30,"",0,VATCode,false,VATCodeSClass);  MatText(t=kInvoiceRowTypeLoanInterest,32,"% займа",true);  MatCol(t,98,"",0,CuAccCode,true,CuAccSClass);  MatCol(t,-350,"",0,SalesAcc,true,AccSClass);  MatCol(t,-230,"",0,Objects,false,0);  MatCol(t,-110,"",0,Sum,true,0);  MatCol(t,-30,"",0,VATCode,false,VATCodeSClass);  MatText(t=kInvoiceRowTypeVoid,28,"Отменить",false);  MatColTL(t,65,"Подпись",0,-1,ViewOnly,0,VoidedSign,false,0);  MatCol(t,100,"Товар",0,ArtCode,false,INSClass);  if (HasVarieties) then begin  MatCol(t,150,"К-во",0,Quant,true,MATVARINSClass);  end else begin    MatCol(t,150,"К-во",0,Quant,true,0);   end;  MatCol(t,190,"Цена",0,Price,true,0);  MatCol(t,250,"Описание",0,Spec,false,0);  MatCol(t,-195,"Сер. №",0,SerialNr,false,SerialNrSClass);  MatCol(t,-110,"%",0,vRebate,true,0);  MatCol(t,-80,"Сумма",0,Sum,true,0);  MatText(t=kInvoiceRowTypeSubtotal,32,"Итого",true);  MatCol(t,100,"",0,Spec,false,0);  MatColTL(t,-140,"Сумма",0,-1,ViewOnly,0,Sum,true,0);  //  MatCol(t,-70,"Cost",0,Cost,true,0);  MatText(t=kInvoiceRowTypeHidden,32,"Эта строка и все последующие не выводятся на печать",false);  MatText(t=kInvoiceRowTypeCorrection,32,"K",true);  MatCol(t,45,"Товар",0,ArtCode,false,INSClass);  MatCol(t,91,"Кво",0,Quant,true,0);   MatText(t=kInvoiceRowTypeRetention,32,"Удержание",true);  MatCol(t,100,"",0,Spec,false,0);  MatColTL(t,-210,"SalesAcc",0,-1,0,0,SalesAcc,false,AccSClass);  MatColTL(t,-110,"Сумма",0,-1,0,0,Sum,true,0);  MatCol(t,-30,"",0,VATCode,false,VATCodeSClass);  MatText(t=kInvoiceRowTypeGiftVoucherSold,32,"ПС",true);  MatCol(t,58,"",0,GCNr,false,GCSClass);  MatCol(t,-416,"",0,Spec,false,0);  MatCol(t,-84,"Сумма",0,Sum,true,0);  MatCol(t,-24,"",0,VATCode,false,VATCodeSClass);    MatText(t=kInvoiceRowTypeGiftVoucherPayment,32,"ПСП",true);  MatCol(t,58,"",0,GCNr,false,GCSSClass);  MatCol(t,-316,"",0,Spec,false,0);  MatCol(t,-84,"Сумма",0,Sum,true,0);  MatCol(t,-24,"",0,VATCode,false,VATCodeSClass);    MatText(t=kInvoiceRowTypeCashPayment,32,"Налич.",true);  MatCol(t,94,"Сумма",0,Sum,true,0);  MatCol(t,198,"Валюта",0,CurncyCode,true,CurncyCodeSClass);   MatCol(t,250,"Спец.",0,Spec,false,0);   MatText(t=kInvoiceRowTypeLoyaltyPointsPayment,32,"LOYPA",true);  MatCol(t,68,"Сумма",0,Sum,true,0);  MatCol(t,108,"Баллы",0,Points,true,0);  MatCol(t,148,"Валюта",0,CurncyCode,true,CurncyCodeSClass);  MatCol(t,-280,"Спец.",0,Spec,false,0);  MatText(t=kInvoiceRowTypeLoyaltyPointsBonus,28,"LOYBO",true);  MatCol(t,68,"Баллы",0,Points,true,0);  MatCol(t,141,"Спец.",0,Spec,false,0);  MatText(t=kInvoiceRowTypeCreditCardPayment,32,"CC",true);  MatCol(t,58,"Сумма",0,Sum,true,0);  MatCol(t,-280,"",0,CreditCard,false,CreditCardSClass);  MatCol(t,-84,"Авторизация",0,AuthorizationCode,false,0);  MatText(t=kInvoiceRowTypeHeader,32,"Заголовок",true);  MatCol(t,100,"",0,Spec,false,0);  MatText(t=kInvoiceRowType18,28,"Зарезерв.",true); // Don't use this number  MatCol(t,100,"",0,Spec,false,0);  MatText(t=kInvoiceRowType19,28,"Зарезерв.",true); // Don't use this number  MatCol(t,100,"",0,Spec,false,0);  MatText(t=kInvoiceRowTypePerceptionTax,32,"Налоговые сборы",true);  MatCol(t,132,"",0,CuAccCode,false,0);  MatCol(t,252,"",0,TAX2Prc,true,0);  MatCol(t,292,"",0,Sum,true,0);  MatCol(t,372,"",0,SalesAcc,false,0);  MatCol(t,452,"",0,Spec,false,0);  MatText(t=kInvoiceRowTypeWithholdingTax,32,"Удерживаемый налог",true);  MatCol(t,132,"",0,WHTax,false,WHTaxSClass);  MatCol(t,172,"",0,SalesAcc,false,AccSClass);  MatCol(t,292,"",0,Sum,true,0);  MatCol(t,392,"",0,Spec,false,0);  MatText(t=kInvoiceRowTypeMultiBuyDiscount,32,"Кампания",true);  MatCol(t,152,"",0,MBRCode,false,0);  MatCol(t,192,"",0,ArtCode,false,INSClass);  MatCol(t,-400,"",0,Spec,false,0);  MatCol(t,-270,"",0,Quant,true,0);  MatCol(t,-235,"",0,Price,true,0);  MatCol(t,-135,"",0,vRebate,true,0);  MatCol(t,-100,"",0,Sum,true,0);  MatText(t=kInvoiceRowTypeDebtorsTransfer,32,"DBT TRSF",true);  MatCol(t,94,"Ком.",0,Spec,false,0);  MatCol(t,-235,"Счет дебеторов",0,SalesAcc,false,0);  MatCol(t,-135,"Сумма",0,Sum,true,0);  MatCol(t,-30,"НДС",0,VATCode,false,0);   //t = 21 kInvoiceRowTypeChequePayment    Flip(1);  //  MatCol(t=kInvoiceRowTypeNormal,194,"Description",0,Spec,false,0);  MatCol(t=kInvoiceRowTypeNormal,144,"Описание",0,Spec,false,0);  MatCol(t,-235,"Цена",0,Price,true,0);  //  MatColTL(t,-235,"",0,M45Val,Normal,0,Price,true,0);  MatCol(t,-135,"%",0,vRebate,true,0);  MatCol(t,-100,"Сумма",0,Sum,true,0);  MatCol(t=kInvoiceRowTypeStructuredItemComponent,144,"Описание",0,Spec,false,0);  MatCol(t,-235,"Цена",0,Price,true,0);  //  MatColTL(t,-235,"",0,M45Val,Normal,0,Price,true,0);  MatCol(t,-135,"%",0,vRebate,true,0);  MatCol(t,-100,"Сумма",0,Sum,true,0);  MatCol(t=kInvoiceRowTypeInterest,-260,"",0,OrdRow,true,0);  MatCol(t,-235,"",0,BasePrice,true,0);  MatCol(t,-135,"",0,vRebate,true,0);  MatCol(t,-100,"",0,Sum,true,0);  MatCol(t=kInvoiceRowTypeCorrection,144,"Описание",0,Spec,false,0);  MatCol(t,-235,"Цена",0,Price,true,0);  MatCol(t,-135,"%",0,vRebate,true,0);  MatCol(t,-100,"Сумма",0,Sum,true,0);  Flip(2);  MatCol(t=kInvoiceRowTypeNormal,144,"Описание",0,Spec,false,0);  MatCol(t,-360,"Счет",0,SalesAcc,false,AccSClass);  MatCol(t,-310,"Буд.пер",0,PeriodCode,false,AutSimPerSClass);  MatCol(t,-255,"Склад",0,Location,false,LocationSClass);  MatCol(t,-180,"Место",0,PosCode,false,UsedPosSClass);  if (UseTaxTemplatesforTaxCalc) then begin    MatCol(t,-144,"Объекты",0,Objects,false,ObjSClass);    MatCol(t,-70,"НДС",0,TaxTemplateCode,false,TaxTemplateSClass);  end else begin    MatCol(t,-124,"Объекты",0,Objects,false,ObjSClass);    MatCol(t,-30,"НДС",0,VATCode,false,VATCodeSClass);  end;  MatCol(t=kInvoiceRowTypeStructuredItemComponent,144,"Описание",0,Spec,false,0);  MatCol(t,-360,"Счет",0,SalesAcc,false,AccSClass);  MatCol(t,-310,"Буд.пер",0,PeriodCode,false,AutSimPerSClass);  MatCol(t,-255,"Склад",0,Location,false,LocationSClass);  MatCol(t,-180,"Место",0,PosCode,false,UsedPosSClass);  if (UseTaxTemplatesforTaxCalc) then begin    MatCol(t,-144,"Объекты",0,Objects,false,ObjSClass);    MatCol(t,-70,"НДС",0,TaxTemplateCode,false,TaxTemplateSClass);  end else begin    MatCol(t,-124,"Объекты",0,Objects,false,ObjSClass);    MatCol(t,-30,"НДС",0,VATCode,false,VATCodeSClass);  end;  MatCol(t=kInvoiceRowTypeInterest,-70,"",0,SalesAcc,false,AccSClass);  MatCol(t,-24,"",0,VATCode,false,VATCodeSClass);  //  MatCol(t=kInvoiceRowTypePrepayment,-224,"",0,SalesAcc,false,AccSClass);  //  MatCol(t,-24,"",0,VATCode,false,VATCodeSClass);  MatCol(t=kInvoiceRowTypeCorrection,144,"Описание",0,Spec,false,0);  MatCol(t,-250,"Счет",0,SalesAcc,false,AccSClass);  MatCol(t,-170,"Буд.пер.",0,PeriodCode,false,AutSimPerSClass);  MatCol(t,-104,"Объекты",0,Objects,false,ObjSClass);  MatCol(t,-30,"НДС",0,VATCode,false,VATCodeSClass);  Flip(3);  MatCol(t=kInvoiceRowTypeNormal,144,"Описание",0,Spec,false,0);  if (UserCanAction("ViewCostPrice",true)) then begin    MatCol(t,-380,"Цена",0,Price,true,0);    MatCol(t,-315,"%",0,vRebate,true,0);    MatCol(t,-280,"Ст.в осн.2",0,BasePriceB2,true,0);    MatCol(t,-210,"Стоим-ть",0,BasePrice,true,0);    MatCol(t,-140,"Прибыль",0,rowGP,true,0);    MatCol(t,-70,"FIFO",0,FIFO,true,0);  end else begin    MatCol(t,-235,"Цена",0,Price,true,0);    MatCol(t,-135,"%",0,vRebate,true,0);    MatCol(t,-100,"Сумма",0,Sum,true,0);  end;  MatCol(t=kInvoiceRowTypeStructuredItemComponent,144,"Описание",0,Spec,false,0);  if (UserCanAction("ViewCostPrice",true)) then begin    MatCol(t,-380,"Цена",0,Price,true,0);    MatCol(t,-315,"%",0,vRebate,true,0);    MatCol(t,-280,"Ст.в осн.",0,BasePriceB2,true,0);    MatCol(t,-210,"Стоим-ть",0,BasePrice,true,0);    MatCol(t,-140,"Прибыль",0,rowGP,true,0);    MatCol(t,-70,"FIFO",0,FIFO,true,0);  end else begin    MatCol(t,-235,"Цена",0,Price,true,0);    MatCol(t,-135,"%",0,vRebate,true,0);    MatCol(t,-100,"Сумма",0,Sum,true,0);  end;  MatCol(t=kInvoiceRowTypeCorrection,144,"Описание",0,Spec,false,0);  if (UserCanAction("ViewCostPrice",true)) then begin    MatCol(t,-315,"Цена",0,Price,true,0);    MatCol(t,-245,"%",0,vRebate,true,0);    MatCol(t,-210,"Стоим-ть",0,BasePrice,true,0);    MatCol(t,-140,"Прибыль",0,rowGP,true,0);    MatCol(t,-70,"FIFO",0,FIFO,true,0);  end else begin    MatCol(t,-235,"Цена",0,Price,true,0);    MatCol(t,-135,"%",0,vRebate,true,0);    MatCol(t,-100,"Сумма",0,Sum,true,0);  end;  Flip(4);  MatCol(t=kInvoiceRowTypeNormal,144,"Описание",0,Spec,false,0);  MatCol(t,-370,"Продавцы",0,Salesmen,false,UserSClass);   MatCol(t,-310,"Серийный номер",0,SerialNr,false,SerialNrSClass); //  MatCol(t,-250,"Main Serial No.",0,MotherNr,true,0);  MatCol(t,-230,"П.Фактор",0,PriceFactor,true,0);   MatCol(t,-180,"Структура",0,Recepy,false,RecSClass);  if (UserCanAction("ViewCostPrice",true)) then begin    MatCol(t,-70,"FIFO",0,FIFORowVal,true,0);  end else begin  end;  MatCol(t=kInvoiceRowTypeStructuredItemComponent,144,"Описание",0,Spec,false,0);  MatCol(t,-310,"Сер. №",0,SerialNr,false,SerialNrSClass);  MatCol(t,-240,"Фактор",0,PriceFactor,true,0);  MatCol(t,-180,"Структура",0,Recepy,true,0);  if (UserCanAction("ViewCostPrice",true)) then begin    MatCol(t,-110,"FIFO",0,FIFORowVal,true,0);  end else begin  end;  MatCol(t,-40,"Коэф.",0,Coefficient,true,0);  MatCol(t=kInvoiceRowTypeCorrection,144,"Описание",0,Spec,false,0);  MatCol(t,-310,"Сер. №",0,SerialNr,false,SerialNrSClass);  MatCol(t,-240,"Фактор",0,PriceFactor,true,0);  MatCol(t,-180,"Структура",0,Recepy,true,0);  if (UserCanAction("ViewCostPrice",true)) then begin    MatCol(t,-110,"FIFO",0,FIFORowVal,true,0);  end else begin  end;  MatCol(t,-80,"",0,MotherArtCode,false,0);  MatCol(t,-40,"",0,RecipeQuant,false,0);  //  MatCol(t,-40,"Коэф",0,Coefficient,true,0);  Flip(5);  MatCol(t=kInvoiceRowTypeNormal,144,"Наименование",0,Spec,false,0);  MatCol(t,-315,"Ед-ца",0,UnitCode,false,UnitSClass);  MatCol(t,-260,"К-во ед.",0,UnitFactQuant,true,0);  MatCol(t,-200,"Шир.",0,UnitXval,true,0);  MatCol(t,-160,"Выс.",0,UnitYval,true,0);  MatCol(t,-120,"Глуб.",0,UnitZval,true,0);  MatCol(t,-80,"Цена ед-ц",0,UnitFactPrice,true,0);  MatCol(t=kInvoiceRowTypeStructuredItemComponent,144,"Наименование",0,Spec,false,0);  MatCol(t,-315,"Ед-ца",0,UnitCode,false,UnitSClass);  MatCol(t,-260,"К-во ед.",0,UnitFactQuant,true,0);  MatCol(t,-200,"Шир.",0,UnitXval,true,0);  MatCol(t,-160,"Выс.",0,UnitYval,true,0);  MatCol(t,-120,"Глуб.",0,UnitZval,true,0);  MatCol(t,-80,"Цена ед-ц",0,UnitFactPrice,true,0);  MatCol(t=kInvoiceRowTypeCorrection,144,"Наименование",0,Spec,false,0);//New Row Type..  MatCol(t,-315,"Ед-ца",0,UnitCode,false,UnitSClass);  MatCol(t,-260,"К-во ед.",0,UnitFactQuant,true,0);  MatCol(t,-200,"Шир.",0,UnitXval,true,0);  MatCol(t,-160,"Выс.",0,UnitYval,true,0);  MatCol(t,-120,"Глуб.",0,UnitZval,true,0);  MatCol(t,-80,"Цена ед-ц",0,UnitFactPrice,true,0);  Flip(6);  MatCol(t=kInvoiceRowTypeNormal,144,"Наименование",0,Spec,false,0);  MatCol(t,-390,"Код товара клиента",0,CustArtCode,false,CUINSClass);   MatCol(t,-300,"Коэфф.",0,Coefficient,true,0);   MatCol(t,-260,"Цен. фактор",0,PriceFactor,true,0);   MatCol(t,-210,"История серв. контр.",0,CUServiceHistNr,false,0);   MatCol(t,-130,"Кред. строка",0,CreditedRow,false,0);   MatCol(t,-70,"Налог на окр. ср.",0,RepaExVAT,true,0);   MatCol(t=kInvoiceRowTypeStructuredItemComponent,144,"Наименование",0,Spec,false,0);  MatCol(t,-390,"Код товара клиента",0,CustArtCode,false,CUINSClass);   MatCol(t,-300,"Коэфф.",0,Coefficient,true,0);   MatCol(t,-260,"Цен. фактор",0,PriceFactor,true,0);   MatCol(t,-210,"История серв. контр.",0,CUServiceHistNr,false,0);   MatCol(t,-130,"Кред. строка",0,CreditedRow,false,0);   MatCol(t,-70,"Налог на окр. ср.",0,RepaExVAT,true,0);   MatCol(t=kInvoiceRowTypeCorrection,144,"Наименование",0,Spec,false,0);  MatCol(t,-80,"Нал.на окр.среду",0,RepaExVAT,true,0);  InsertRowTest;  DeleteRowTest;  EndMatrix;  vs = 22;  v = 18; VTab(-35,v,-16,v+vs,ToolFlip,1,"A");  v=v+ vs; VTab(-35,v,-16,v+vs,ToolFlip,2,"B");  v=v+ vs; VTab(-35,v,-16,v+vs,ToolFlip,3,"C");  v=v+ vs; VTab(-35,v,-16,v+vs,ToolFlip,4,"D");  v=v+ vs; VTab(-35,v,-16,v+vs,ToolFlip,5,"E");  v=v+ vs; VTab(-35,v,-16,v+vs,ToolFlip,6,"F");  Tile(3,70,false,"3",FrRate);  vs = 20;  EditField(h1,v=6,50,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass);  EditField(h2,v,50,"Курс",Normal,FrRate,true,0);  EditField(h2+65,v,50,":",Normal,ToRateB1,true,0);  StaticText(h2+125,v+12,"Базовая ваолюта 1",false);  EditField(h1,v+=vs,50,"Базовая ваолюта 1",Normal,BaseRate1,true,0);  EditField(h2+65,v,50,":",Normal,ToRateB2,true,0);  StaticText(h2+125,v+12,"Базовая ваолюта 2",false);  EditField(h1,v+=vs,50,"Базовая ваолюта 2",Normal,BaseRate2,true,0);  Tile(4,110,false,"4",ShipDeal);  vs = 20; h1 = 110; h2 = 290; h3 = 530; h4 = -100;  EditField(h1,v=6,80,"Условия отгрузки",Normal,ShipDeal,false,ShipDealSClass);  EditField(h1,v+=vs,80,"Метод доставки",Normal,ShipMode,false,DMSClass);  EditField(h1,v+=vs,80,"Маршрут",Normal,Sorting,false,DelRouteSClass);  EditField(h1,v+=vs,80,"Склад",Normal,Location,false,LocationSClass);  EditField(h1,v+=vs,80,"Подразделение",ViewOnly,BranchID,false,AllCUSClass);  EditField(h2,v=vm,80,"Итого кол-во",ViewOnly,TotQty,true,0);  EditField(h2,v+=vs,80,"Итого вес",ViewOnly,TotWeight,true,0);  EditField(h2,v+=vs,80,"Итого объем",ViewOnly,TotVolume,true,0);  EditField(h2,v+=vs,80,"Фрахт",Normal,FrPrice,true,0);  EditField(h2,v+=vs,80,"Трансп. комп.",Normal,FreightCode,false,FreightCompanySClass);  CheckBox(h3,v=vm,0,"Обновить склад",UpdStockFlag);  EditField(h3,v+=3*vs,80,"НДС фрахта",Normal,FrVATCode,true,VATCodeSClass);  Tile(5,170,false,"5",OrderNr);  EditField(h1,v=vm,80,"Номер счета",ViewOnly,OrderNr,false,0);  EditField(h1,v+=vs,80,"Зак.на обсл.",ViewOnly,SVONr,false,0);  EditField(h1,v+=vs,80,"№ кред.договор.",ViewOnly ,CredManNr,false,0);  EditField(h1,v+=vs,80,"Стат. сумма",Normal,StatVal,true,0);  EditField(h1,v+=vs,80,"Дата оказания усл.",Normal,ServiceDelDate,false,PasteCurDate);  EditField(h1,v+=vs,80,"Время операции",Normal,TransTime,false,SetSClass);  //  ColourPushButton(-100,v,-20,v+60,"TestIVDClassCardData","Test" & chr(10) & "CardData",4);  //  SoftEditField(h3+50,v,100,"Control Code"  ,ViewOnly ,"TaxAuthIDCC",false,0,M4Str,60);  EditField(h2,v=vm,135,"Налогов. орган",ViewOnly ,TaxAuthID,false,0);  EditField(h2,v+=vs,135,"Контрольн. код",ViewOnly ,TaxAuthIDCC,false,0);  EditField(h2,v+=vs,135,"CAE/CAEA",Normal,CAE,false,0);  EditField(h2,v+=vs,135,"Срок дейст. CAE",Normal,CAEExpiry,false,0);  EditField(h2,v+=vs,70,"CAEA действ. с",ViewOnly,CAEAStartDate,false,0);  EditField(h2+173,v,70,"CAEA действ. до",ViewOnly,CAEAExpiryDate,false,0); //##cc    EditField(h2,v+=vs,70,"CAEA действ. с",ViewOnly,CAEAStartDate,false,0);  EditField(h2+173,v,70,"CAEA действ. до",ViewOnly,CAEAExpiryDate,false,0); //##cc   EditField(h2,v+=vs,135,"Статус",Normal,Status,false,SetSClass);  EditField(h2,v+=vs,135,"Банк",Normal,BankCode,false,BankSClass);  //  EditField(h2,v+=vs,135,"E-Inv Exp. Date",ViewOnly,EInvExpDate,false,0);//Tx server  //  EditField(h2,v+=vs,135,"E-Inv Exp. Qty",ViewOnly,EInvExpQty,false,0);  h3 = 545; //##ii;  CheckBox(h3,v=vm,0,"Без напоминания",NoRemndrFlag);  CheckBox(h3,v+=16,0,"Без пени",NoInterestFlag);  CheckBox(h3,v+=16,0,"Без сборов",NoColectionFlag);  CheckBox(h3,v+=16,0,"Информация о клиенте",ARonTR);  CheckBox(h3,v+=16,0,"Не посылать как эл. сч/ф",NoEInvoice);  CheckBox(h3,v+=16,0,"Фискальная сч/ф",FiscalFlag);  CheckBox(h3,v+=16,0,"Счет себе",SelfBilling);  //  CheckBox(h3,v+=16,0,"E-Invoice Exported",EInvExpFlag);  Tile(6,150,false,"6",PriceList); vs = 20;  EditField(h1,v=vm,80,"Прайс-лист",Normal,PriceList,false,PLDefSClass);  EditField(h1,v+=vs,80,"Таблица сидок",ViewOnly,RebCode,false,0);   //  EditField(h1,v+=vs,80,"Disc. %",ViewOnly,DiscPerc,false,0);  //  EditField(h1,v+=vs,80,"Disc. Amount",ViewOnly,DiscSum,false,0);  EditField(h1,v+=vs,80,"Первонач. клиент",ViewOnly,OrgCust,false,0);  EditField(h1,v+=vs,80,"Кредитная карта",Normal,CreditCard,false,CreditCardSClass);  EditField(h1,v+=vs,80,"Авторизация",Normal,AuthorizationCode,false,0);  EditField(h1,v+=vs,80,"Счет дебиторов",Normal,ARAcc,false,AccSClass);  EditField(h1,v+=vs,-20,"Комментарий",Normal,InvComment,false,0);  EditField(h2,v=vm,80,"Группа продаж",ViewOnly,SalesGroup,true,0);  EditField(h2,v+=vs,80,"Язык",Normal,LangCode,false,LangSClass);  EditField(h2,v+=vs,80,"Комиссия",Normal,Commision,true,0);  EditField(h2,v+=vs,80,"Итого вкл. ком.",ViewOnly,SumIncCom,true,0);  EditField(h2,v+=vs,80,"Пеня",Normal,IntCode,true,IntSClass);  EditField(h2,v+=vs,80,"Org. No.",Normal,CredInv,false,0);  EditField(h3,v=vm,80,"Уровень напоминания",Normal,LastRemndr,false,0);  EditField(h3,v+=vs,80,"Дата последнего напомин.",Normal,LastRemDate,false,PasteCurDate);  EditField(h3,v+=vs,80,"Накопительная карта",Normal,LoyaltyCardNr,false,LoyaltyCardSClass);  EnterSkip(Math);  EditField(h3,v+=vs,80,"Программы лояльности",ViewOnly,LCMLevel,false,LCMemberLevelSClass);  EditField(h3,v+=vs,80,"Накопительные баллы",ViewOnly,Points,true,0);  EditField(h3,v+=vs,80,"№ TREO",Normal,TREONr,false,0);  Tile(7,250,false,"7",Addr1); vs = 20;  label = UserDefined("CUVc","InvAddr0");  if (blank(label)) then begin label = "Сч/ф"; end;  EditField(h=110,v=6,-20,label,Normal,Addr1,false,0);  label = UserDefined("CUVc","InvAddr1");  if (blank(label)) then begin label = "адрес"; end;  EditField(h,v+=vs, -20,label,Normal,Addr2,false,0);  label = UserDefined("CUVc","InvAddr2");  EditField(h,v+=vs, -20,label,Normal,Addr3,false,0);  label = UserDefined("CUVc","InvAddr3");  EditField(h,v+=vs, -20,label,Normal,InvAddr3,false,0);  label = UserDefined("CUVc","InvAddr4");  EditField(h,v+=vs, -20,label,Normal,InvAddr4,false,0);  EditField(h,vm=(v+=vs),80,"Страна",Normal,InvCountry,false,CountrySClass);  ButtonFrame(h3=h+4,v=(vm+=40),123,6,"Статус утверждения");  RadioButton(h3,v,kAcceptanceStateNotRequired,0,"не обязательно",AcceptanceStatus);  RadioButton(h3,v+=16,kAcceptanceStateNotStarted,0,"не начато",AcceptanceStatus);  RadioButton(h3,v+=16,kAcceptanceStateNotRequested,0,"не запрошено",AcceptanceStatus);  RadioButton(h3,v+=16,kAcceptanceStatePending,0,"в ожидании",AcceptanceStatus);  RadioButton(h3,v+=16,kAcceptanceStateApproved,0,"утверждено",AcceptanceStatus);  RadioButton(h3,v+=16,kAcceptanceStateRejected,0,"отклонено",AcceptanceStatus);     v = VATZoneButtonsLabelsRUS(h3=290,v=vm,140,16);  EditField(h2=-170,v=vm,150,"Регион",Normal,Region,false,RegionSClass);   EditField(h2,v+=vs,150,"ИНН",Normal,VATNr,false,0);  EditField(h2,v+=vs,150,"Телефон",Normal,Phone,false,0);  EditField(h2,v+=vs,150,"Факс",Normal,Fax,false,0);  Tile(8,170,false,"8",ShipAddr0); vs = 20;  EditField(h1,v=6,80,"Код адреса",Normal,DelAddrCode,false,DelAddr3SClass);  EditField(h1,v+=vs,-20,"Отгрузка",Normal,ShipAddr0,false,0);  EditField(h1,v+=vs,-20,"Адрес",Normal,ShipAddr1,false,0);  EditField(h1,v+=vs,-20,"",Normal,ShipAddr2,false,0);  EditField(h1,v+=vs,-20,"",Normal,ShipAddr3,false,0);  EditField(h1,v+=vs,-20,"",Normal,DelAddr3,false,0);  EditField(h1,v+=vs,-20,"",Normal,DelAddr4,false,0);  EditField(h1,v+=vs,80,"Страна",Normal,DelCountry,false,CountrySClass);  EnterSkip(InvDate);  SpecialMenu("Статус товара",'I',0,"ItemStatusIVDsm");  SpecialMenu("Поиск товара",'f',1,"ItemSearchDsm");  SpecialMenu("Статус счета-фактуры",'r',2,"IVInfoIVDsm");  SpecialMenu("Цены предыдущей продажи",' ',15,"IVLastSPrsm");  SpecialMenu("Добавить строку заголовка",' ',12,"HeaderLineIVDsm");  SpecialMenu("Добавить скрытую строку",' ',12,"HiddenLineIVDsm");  SpecialMenu("Добавить налог на окружающую среду",' ',19,"RepaIVsm");  SpecialMenu("Добавить удержание",' ',25,"RetentionLineIVDsm");   SpecialMenu("Добавить итого",' ',12,"SubTotalLineIVDsm");  SpecialMenu("Отправить для утверждения",' ',6,"IVSendforAcceptanceIVDsm");  SpecialMenu("Отменить запрос на  утверждение",' ',2,"CancelApprovalRequestDsm"); //!!PRODTRANSLATE  if (GuiType==kGuiiPhone) then begin    SpecialMenu("Sign",' ',10,"SignIVDsm"); //!!TRANSLATE  end;  SpecialMenu("Пересчитать в осн. вал.1",' ',14,"SwitchToBase1IVDsm");  SpecialMenu("Связать с предоплатой",' ',4,"ConnectToPrepayIVDsm");  SpecialMenu("Пересчитать скидку",' ',11,"RecalcDiscountIVDsm");  SpecialMenu("Пересчитать вес и объем",' ',10,"RecalcWeightIVDsm");  SpecialMenu("Обновить товары валютного прейскуранта",' ',5,"UpdatePricesIVDsm");  SpecialMenu("Распечатать кассовый ордер",' ',7,"PrintCashInOutIVDsm");  SpecialMenu("Распечатать проформу счета-фактуры",' ',3,"PrintProformaIVDsm");  SpecialMenu("Отправить на фискальный принтер",' ',19,"PrintToFiscPrntIVDsm");  SpecialMenu("Платёж кредитной картой",' ',22,"CCPayIVDsm");  SpecialMenu("Редактировать платежи",' ',24,"EditInstalmentIVDsm");  SpecialMenu("Отправить эл. сч/ф заново",' ',21,"ResendEIVDsm");  SpecialMenu("Открыть запись операции",'t',8,"OpenTRFromIV");  SpecialMenu("Создать приходный ордер",' ',1,"DoCLInFromIVD");  SpecialMenu("Создать кредитовый счет-фактуру",' ',20,"CreateCreditNoteIVDsm");  SpecialMenu("Создать кредитный договор",' ',25,"CreateCredManIVsm");  SpecialMenu("Создать контракт",' ',13,"COFromIVDsm");  SpecialMenu("Создать корректирующую счет-фактуру",' ',16,"CorrectionIVsm");  SpecialMenu("Создать дебит ноту",' ',20,"CreateDebitNoteIVDsm");  SpecialMenu("Создать счет-фактуру EDI",' ',9,"DoEDIInvFromIVD");  SpecialMenu("Создать e-mail",'m',23,"CreateMailFromIVDsm");  SpecialMenu("Создать взносы",' ',6,"CreateInstalmentsIVDsm");  SpecialMenu("Создать коррекцию НДС книги продаж",' ',17,"VATCorrectionIVsm");  SpecialMenu("Изменение скидки менеджером",' ',24,"MgrsDiscOverrideIVDsm");    SpecialMenu("Открыть нал. матрицу",' ',25,"TestVatMatrixIVDsm");   SpecialMenu("Добавить возврат товара",' ',0,"PasteRetItemIVDsm");   // SpecialMenu("Apple гар. статус проверка",'w',26,"WarrantyStatusIVDsm");   if(currentuser=="SA")then begin	SpecialMenu("Экспорт регистра",' ',0,"ExportRegIVDsm");	end;end else begin  date td;  integer acnt,wn;  longint bm,lt,rt,tp,page;  real h,h2,h3,h4,v;  record IVVc IVr;  record LocalMachineBlock LMb;  record POSButtonsVc POSBr;  string 255 bc1,bc2,compname,lmc,nr,sessdesc,sm;  time tt;  BlockLoad(LMb);        wn = CurWindow;    GetScreenSize(wn,tp,lt,bm,rt);    switch (GuiType) begin      case kGuiCocoa:              bm = bm - 80;      case kGuiGDI:        tp = tp + 30;        bm = bm - 40;        rt = rt - 55;        lt = lt - 45;      case kGuiWPF:        tp = tp + 30;        bm = bm - 40;        rt = rt - 55;        lt = lt - 45;    end;        page = StringToInt(GetWindowString(wn,"touchscreenwindowpage"));    if (page<1) then begin      page = 1;    end;    ReadPOSButtons("IVDClass",LMb.POSButtonGroup,page,bc1,bc2,compname,POSBr,acnt);    SetWRect(lt,tp,rt,bm);     BrowseButtons(false);    Sizeable(-1,-1,0,0);    BrowseButtons(false);    DynamicWindow;    UseView(IVVc);    ActiveFieldOnNew("ivcashcommand");    ToolBar;//    PushButton(-340,5,-340 + 34,5+18,ToolPasteSpec,"v");    EndToolBar;        v = 20;    h = -300; h2 = -150; h3 = -70; h4 = -10;        wn = CurWindow;    if (wn>0) then begin      switch (GetWindowClass(wn)) begin        case "IVDClass":          GetWindowRecord(wn,IVr);      end;    end;    td = IVr.TransDate;    if (blankdate(td)) then begin td = CurrentDate; end;    tt = IVr.TransTime;    if (blanktime(tt)) then begin tt = CurrentTime; end;    lmc = IVr.MachineName;    if (blanktime(lmc)) then begin lmc = LMb.LocalMachineCode; end;    sm = IVr.SalesMan;    if (blanktime(sm)) then begin sm = CurrentUser; end;    nr = "Invoice: ";    if (IVr.SerNr>0) then begin      nr = nr & IVr.SerNr;    end;            //if (IsSessionOpen(IVr.MachineName,IVr.DrawerCode,CurrentDate,CurrentTime)) then begin// Edit ************************** Thursday, 14 November 2013 14:37:42      //sessdesc = "Сессия открыта";     //end else begin      //sessdesc = "*** Сессия закрыта ***";         //end; // Edit ************************** Thursday, 14 November 2013 14:37:40      sessdesc = "Скидка клиента: " & IVr.RebCode;                DisplayRecordDetails_RUS(10,26,compname,td,tt,lmc,sm,nr,IVr.CustCode,IVr.Addr0,IVr.LoyaltyCardNr,LMb.ShowBaggerSupervisor,"","","",blankval,sessdesc,true,IVr.OfficialSerNr);        if (bm<650) then begin      SoftEditFieldTLX(360,6,h4,"",M4Str,ViewOnly,100,20,patM4black,"CustomerDisplayData_Line1",true,0);      SoftEditFieldTLX(360,36,h4,"",M4Str,ViewOnly,100,30,patM4black,"CustomerDisplayData_Line2",true,0);    end else begin      SoftEditFieldTLX(360,6,h4,"",M4Str,ViewOnly,100,30,patM4black,"CustomerDisplayData_Line1",true,0);      SoftEditFieldTLX(360,46,h4,"",M4Str,ViewOnly,100,50,patM4black,"CustomerDisplayData_Line2",true,0);    end;                HalPushButton(20,350,120,680,"IVDClassUpdateWebBrowser","Показать картинку товара");    SoftEditFieldTLX(20,380,650,"",M4Str,ViewOnly,100,10,patM4black,"CustomerDisplayData_Line3",false,0);   	WebPage(20,400,700,-80,"$subset","");    //WebPage(20,700,390,-80,"$HWStore","");    switch (LMb.POSButtonsPosition) begin      case kPOSButtonsPositionLeft:        SoftEditField(110,-22,200,"Товар/Команда"  ,Normal ,"ivcashcommand",false,INSClass,M4Str,255);      case kPOSButtonsPositionRight:        SoftEditField(-260,-22,200,"Товар/Команда"  ,Normal ,"ivcashcommand",false,INSClass,M4Str,255);    end;        EditField(360,116,-10,"Комментарий",Normal,InvComment,false,0);        SoftEditField(2000,-22,200,""  ,Normal ,"ivcashcommandlastitemsernrf",false,0,M4Str,255);            DrawPOSInterface_RUS(bc1,bc2,POSBr,acnt,"",100);    BottomBar;    SpecialMenu("Вставить товары из перемещения",'B',6,"PasteStoclMovToIVsm");end;  EndWindow;end;*/window ImportImagesVClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real h,v,vs;  WindowBegin("Import Images To IN",ImportImagesVClass,CGMnt,RcType);  SetWRect(20,80,400,240);  vs = 20;h = 130; v = 26;    EndWindow;end;window AddPModeMnVClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real h,v,vs;  WindowBegin("Добавить способ оплаты",AddPModeMnVClass,CGMnt,RcType);  SetWRect(20,80,400,240);  vs = 20;h = 130; v = 26;  	EditField(h,v, -10,"Код",Normal,f1,false,0);  	EditField(h,v+=16, -10,"Счет",Normal,f2,false,AccSClass);  	EditField(h,v+=16, -10,"Коммент.",Normal,f3,false,0);  	EditField(h,v+=16, -10,"Объекты",Normal,f4,false,0);  	/*EditField(h,v, -10,"Код",Normal,f1,false,0);  	EditField(h,v, -10,"Код",Normal,f1,false,0);  	EditField(h,v, -10,"Код",Normal,f1,false,0);*/  EndWindow;end;window AddVATCodeVClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real h,v,vs;  WindowBegin("Добавить код НДС",AddVATCodeVClass,CGMnt,RcType);  SetWRect(20,80,400,240);  vs = 20;h = 130; v = 20;  	EditField(h,v, -10,"Код",Normal,f1,false,0);  	EditField(h,v+=vs, -10,"Искл.%",Normal,vals0,false,0);  	EditField(h,v+=vs, -10,"Вкл.%",Normal,vals1,false,0);  	EditField(h,v+=vs, -10,"До реал.",Normal,f2,false,AccSClass);  	EditField(h,v+=vs, -10,"По реал.",Normal,f3,false,AccSClass);  EndWindow;end;window ImportImagesTClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real h,v,vs;  WindowBegin("Import Images To IN",ImportImagesVClass,CGMnt,RcType);  SetWRect(20,80,400,240);  vs = 20;h = 130; v = 26;  HalPushButton(h,v,h+100,v+20,"ImportImagesMn","Импорт картинок");  EndWindow;end;window PricePointListDClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real h,h1,h2,t,v,vs;  WindowBegin("Прайс поинт лист",PricePointListDClass,CGview,AT2RevView);  SetWRect(20,80,512,639);  UseView(PricePointListVc);  vs = 20; h=50; h1=100; h2=220;  EditField(h=30,v=10, 70, "No.",Normal,SerNr,false,0);  EditField(h+150,v, 82, "Date",Normal,TransDate,false,PasteCurDate);  CheckBox(-100,v,0,"ОК",OKFlag);  CheckBox(-100,v+=20,0,"Закрыто",Closed);    MatrixBegin(3,v+=40,-20,-20,0,5000);  //MatCol(t=1,32,"Num",0,Num,false,0);  MatCol(t=1,32,"Cost",0,Cost,false,0);  MatCol(t,150,"Price",0,Price,true,0);  EndMatrix;  EndWindow;end;window PricePointListLClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  WindowBegin("Прайс поинт лист",PricePointListLClass,CGmlist,RcType);  SetWRect(20,80,509,298);  SpawnClass(PricePointListDClass);  Sizeable(-1,-1,0,0);  UseView(PricePointListVc);  RecordList(4,17,-21,-39);  RlColKey(4,4,"SerNr",SerNr,false,SerNr);  RlColKey(81,81,"Date",TransDate,false,TransDate);  SearchField("Search");  EndWindow;end;window INImageIClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  integer wn;  WindowBegin("Картинка товара",INImageIClass,CGother,-);   DynamicWindow;  UseView(INVc);  //SetWRect(10,10,300,300);   SetWRect(0,10,300,300);  Sizeable(-1,-1,-1,-1);  Modality(2);  EditField(70,20,100,"Товар",ViewOnly,Code,false,0);  EditField(70,40,100,"Название",ViewOnly,Name,false,0);  Pict_Field(10,60,-10,-10,"");  EndWindow;end;window PasteRetItemTClass:1 //embcauo009  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin	real h,v,vs;	Integer tilenr,flipnr,f;  WindowBegin("Вставить товар для возврата",PasteRetItemTClass,CGview,-);   DynamicWindow;  SetWRect(0,10,800,300);  /*UseView(RcVc);  //Modality(2);    EditField(100,20,100,"Товар",Normal,ObjStr,false,INSClass);  if(currentcompany==1)then begin  	EditField(100,40,100,"Дата продажи",Normal,sStartDate,false,PasteCurDate);  end;  HalPushButton(100,70,180,90,"SearchRetItems","Поиск товара");  HalPushButton(230,70,350,90,"PasteRetItems","Вставить возврат");    StaticText(29+h,110,"Товар",false);  h=5;  if(currentcompany>1)then begin  	h=50;  	StaticText(29+h,110,"Дата",false);  	h=80;  end;  StaticText(85+h,110,"К-во",false);  StaticText(119+h,110,"Цена",false);  StaticText(169+h,110,"Скидка",false);  StaticText(219+h,110,"Сумма",false);  StaticText(279+h,110,"Склад",false);  StaticText(339+h,110,"Клиент",false);      StringList(9,120,-24,-10);*/    UseView(SHVc);    Tile(0,110,false,"",DelAddrCode);  EditField(100,20,150,"Товар",Normal,DelAddrCode,false,INSClass);  if(currentcompany==1)then begin  	EditField(100,40,100,"Дата продажи",Normal,ShipDate,false,PasteCurDate);  end;  HalPushButton(100,70,180,90,"SearchRetItems","Поиск товара");  HalPushButton(230,70,350,90,"PasteRetItems","Вставить возврат");    StaticText(29+h,110,"Товар",false);  h=5;  if(currentcompany>1)then begin  	h=50;  	StaticText(29+h,110,"Дата",false);  	h=80;  end;    tilenr = 1;  //EnterSkip(Math);  TileButton(tilenr,"Товары");   Tile(tilenr,220,true,tilenr,Math);   v = 24;  MatrixBegin(4,v,-40,-30,-,999);  Flip(0);  MatColTL(1,h=30,"Товар",0,-1,ViewOnly,0,ArtCode,false,0);  flipnr = 1;  Flip(flipnr); flipnr = flipnr + 1;  MatColTL(1,h+=100,"Дата",0,-1,ViewOnly,0,BestBefore,false,0);  MatColTL(1,h+=80,"К-во",0,-1,ViewOnly,0,Ship,false,0);  MatColTL(1,h+=50,"Цена",0,-1,ViewOnly,0,BasePrice,false,0);  MatColTL(1,h+=60,"Скидка",0,-1,ViewOnly,0,PosCode,false,0);  MatColTL(1,h+=60,"Сумма",0,-1,ViewOnly,0,TAX2Reb,false,0);  MatColTL(1,h+=60,"Склад",0,-1,ViewOnly,0,Location,false,0);  MatColTL(1,h+=60,"Клиент",0,-1,ViewOnly,0,CustArtCode,false,0);  MatColTL(1,-110,"Компания",0,-1,ViewOnly,0,VARList,false,0);    if (CurrentUser=="SA" or CurrentUser=="SA1") then begin    Flip(flipnr); flipnr = flipnr + 1;    MatColTL(1,h=130,"FIFO строка",0,-1,ViewOnly,0,FIFO,false,0);    MatColTL(1,h+=70,"FIFO строка вал.",0,-1,ViewOnly,0,FIFORowVal,false,0);    MatColTL(1,h+=100,"Валюта FIFO",0,-1,ViewOnly,0,TAX2Code,false,0);    MatColTL(1,h+=70,"Сч/ф №",0,-1,ViewOnly,0,OrdRow,false,0);    MatColTL(1,h+=70,"Сч/ф row",0,-1,ViewOnly,0,stp,false,0);  end;  InsertRowTest;  DeleteRowTest;  EndMatrix;  vs = 20;  v = 18;   if (flipnr>2) then begin    for (f=1;f<flipnr;f=f+1) begin      VTab(-25,v,-6,v+vs,ToolFlip,f,chr(asc("A") + f - 1));       v = v + vs;    end;  end;    EndWindow;end;window ItemStockStatRClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real h,v;  WindowBegin("Отчет остатков по складам",ItemStockStatRClass,CGRcW,RcType);  SetWRect(20,80,440,150);  h=100;  EditFieldTL(h,v+=20,150,"Товар",M4UStr,Normal,41,f1,false,INSClass);//carefull we run ARRn  EditFieldTL(h,v+=20,150,"Склад",M4UStr,Normal,41,f2,false,LocationSClass);//carefull we run ARRn  EditFieldTL(h,v+=20,150,"Классификация",M4UStr,Normal,41,f3,false,DISClass);//carefull we run ARRn  EditFieldTL(h,v+=20,150,"Бренд",M4UStr,Normal,41,f4,false,DI2SClass);//carefull we run ARRn  EditFieldTL(h,v+=20,150,"Модель",M4UStr,Normal,41,f5,false,DI3SClass);//carefull we run ARRn  EndWindow;end;window ItemStockStatExtRClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real h,v;  WindowBegin("Отчет остатков по складам",ItemStockStatExtRClass,CGRcW,RcType);  SetWRect(20,80,440,150);  h=100;  EditFieldTL(h,v+=20,150,"Дата",M4Date,Normal,41,d1,false,PasteCurDate);//carefull we run ARRn  EditFieldTL(h,v+=20,150,"Товар",M4UStr,Normal,41,f1,false,INSClass);//carefull we run ARRn  EditFieldTL(h,v+=20,150,"Склад",M4UStr,Normal,41,f2,false,LocationSClass);//carefull we run ARRn  EditFieldTL(h,v+=20,150,"Классификация",M4UStr,Normal,41,f3,false,DISClass);//carefull we run ARRn  EditFieldTL(h,v+=20,150,"Бренд",M4UStr,Normal,41,f4,false,DI2SClass);//carefull we run ARRn  EditFieldTL(h,v+=20,150,"Модель",M4UStr,Normal,41,f5,false,DI3SClass);//carefull we run ARRn  CheckBox(h,v+=25,0,"Исключить обычные товары",flags[1]);	CheckBox(h,v+=20,0,"Исключить товары консигн.",flags[2]);	CheckBox(h,v+=20,0,"Исключить товары малоцен.",flags[3]);	  ButtonFrame(h,v+=40,150,2,"Отображать статистику");		  RadioButton(h,v,0,1,"для текущей компании",UsedOnly);  RadioButton(h,v+=20,1,0,"для всех J&W компаний",UsedOnly);		  EndWindow;end;window ItemStockStatExtManRClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real h,v;  WindowBegin("Отчет остатков по складам для менеджеров",ItemStockStatExtManRClass,CGRcW,RcType);  SetWRect(20,80,440,150);  h=100;  EditFieldTL(h,v+=20,150,"Дата",M4Date,Normal,41,d1,false,PasteCurDate);//carefull we run ARRn  EditFieldTL(h,v+=20,150,"Товар",M4UStr,Normal,41,f1,false,INSClass);//carefull we run ARRn  EditFieldTL(h,v+=20,150,"Склад",M4UStr,Normal,41,f2,false,LocationSClass);//carefull we run ARRn  EditFieldTL(h,v+=20,150,"Классификация",M4UStr,Normal,41,f3,false,DISClass);//carefull we run ARRn  EditFieldTL(h,v+=20,150,"Бренд",M4UStr,Normal,41,f4,false,DI2SClass);//carefull we run ARRn  EditFieldTL(h,v+=20,150,"Модель",M4UStr,Normal,41,f5,false,DI3SClass);//carefull we run ARRn  EndWindow;end;window CUChangeCurVClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real h,v,vs;  WindowBegin("Изменить валюту всем пользователям",CUChangeCurVClass,CGMnt,RcType);  SetWRect(20,80,400,240);  vs = 20;h = 130; v = 26;  EditFieldTL(h,v+=20,150,"Валюта",M4UStr,Normal,41,f1,false,CurncyCodeSClass);//carefull we run ARRn  CheckBox(h,v+=20,0,"Очистить валюту",flags[0]);  EndWindow;end;window INChangeCSTVClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real h,v,vs;  WindowBegin("Отменить изменение себестоимости в карточке товара",INChangeCSTVClass,CGMnt,RcType);  SetWRect(20,80,400,240);  vs = 20;h = 130; v = 26;  EndWindow;end;window FIXVClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real h,v,vs;  WindowBegin("FIXVClass",FIXVClass,CGMnt,RcType);  SetWRect(20,80,400,240);  vs = 20;h = 130; v = 26;  EndWindow;end;window EmptyVClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real h,v,vs;  WindowBegin("Обновление",EmptyVClass,CGMnt,RcType);  SetWRect(20,80,400,240);  vs = 20;h = 130; v = 26;  EndWindow;end;window IVrsLClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  integer h,v;    WindowBegin("Счета-фактуры",IVrsLClass,CGmlist,-);    SetWRect(20,80,760,291);    Sizeable(-1,-1,0,0);    //SpawnClass(IVrsDClass);    UseView(IVrsVc);    RecordList(4,17,-21,-39);    RlColKey(4,2,"№1",SerNr,false,SerNr);    RlColKey(70,70,"IVNr",IVNr,false,IVNr);    RlColKey(105,105,"Дата сч/ф",TransDate,false,TransDate);    RlCol(180,180,"RowNr",RowNr,false);        RlCol(287,287,"ArtCode",ArtCode,false);    RlCol(360,360,"Spec",Spec,false);    RlColKey(430,430,"Group",Group,false,Group);    RlColKey(490,490,"MachineName",MachineName,false,MachineName);    RlCol(-110,-110,"Quant",Quant,true);    RlCol(-90,-90,"FIFO",FIFO,true);    RlCol(-45,-45,"Sum",Sum,true);    SearchField("Найти");    EndWindow;end; window RebTableBlockTClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real v;  WindowBegin("Настройка скидок сотрудникам",RebTableBlockTClass,CGHbl,-);  SetBlid(RebTableBlock);  SetWRect(64,80,650,300);  Sizeable(-1,-1,0,0);  MatrixBegin(4,v=17,-32,-5,-,99);  MatCol(1,24,"Стаж",0,Days,false,0);  MatCol(1,94,"Таблица скидок",0,RebCode,false,RebSClass);  EndMatrix;  EndWindow;end;window BackStockMovVClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real h,v,vs;  string 255 label;  WindowBegin("Создать обратное перемещение",BackStockMovVClass,CGMnt,RcType);  SetWRect(20,100,400,300);  v = 6; vs = 20; h = 150;  EditFieldTL(h,v, 80,"Дата",M4Date,Normal,10,d1,false,PasteCurDate);  EndWindow;end;window PUtoIVVClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real h,v;  WindowBegin("Укажите номер перемещения",PUtoIVVClass,CGMnt,RcType);  SetWRect(20,80,450,250);  EditFieldTL(h+200,v+=20, 82,"№ перемещения",M4Long,Normal,50,long1,false,StockMovSClass);  EndWindow;end;window StockMovSClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  WindowBegin("Укажите перемещение",StockMovSClass,CGslist,-);  SpawnClass(StockMovDClass);  SetWRect(20,80,800,298);  Sizeable(-1,-1,0,0);  UseView(StockMovVc);  RecordList(4,17,-21,-39);  RlColKey(4,4,  "Номер",SerNr,false,SerNr);  RlColKey(71,71,"Отпр.",SentOKFlag,false,SentOKFlag);  RlColKey(111,111,"Получ.",OKFlag,false,OKFlag);  RlColKey(151,151,"Дата отгрузки",SentTransDate,false,SentTransDate);  RlColKey(223,223,"Дата получения",TransDate,false,TransDate);  RlColKey(295,295,"Со склада",FrLocation,false,FrLocOK);   RlColKey(450,450,"На склад",ToLocation,false,ToLocOK);  RlColKey(590,590, "Комментарий",Comment,false,Comment);  SearchField("Search");  EndWindow;end;window ItemStockStatExtWebRClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real h,h2,v,vs,vm;  WindowBegin("Отчет остатков по складам",ItemStockStatExtWebRClass,CGEcW,RcType);  SetWRect(20,80,440,150);  vs = 20;  h=100;h2=250;  EditFieldTL(h,v+=20,100,"Дата",M4Date,Normal,41,d1,false,PasteCurDate);//carefull we run ARRn  ButtonFrame(h2,vm=35,150,6,"Выводить в валюте"); //Edit***************************Sasha2,13:32 27.04.2015 {  RadioButton(h2,vm,0,0,"Послед.пост.",ArtMode);  RadioButton(h2,vm+=16,1,0,"Базовой",ArtMode); //Edit***************************Sasha2,13:32 27.04.2015 }  EditFieldTL(h,v+=20,100,"Товар",M4UStr,Normal,41,f1,false,INSClass);//carefull we run ARRn  EditFieldTL(h,v+=20,100,"Склад",M4UStr,Normal,41,f2,false,LocationSClass);//carefull we run ARRn  EditFieldTL(h,v+=20,100,"Классификация",M4UStr,Normal,41,f3,false,DISClass);//carefull we run ARRn  EditFieldTL(h,v+=20,100,"Бренд",M4UStr,Normal,41,f4,false,DI2SClass);//carefull we run ARRn  EditFieldTL(h,v+=20,100,"Модель",M4UStr,Normal,41,f5,false,DI3SClass);//carefull we run ARRn    ButtonFrame(h2,v=100,150,2,"Отображать статистику");		  RadioButton(h2,v,0,0,"для всех J&W компаний",UsedOnly);  RadioButton(h2,v+=20,1,0,"для текущей компании",UsedOnly);        //EditField(h,v+=vs,-100,"IP",Normal,f6,false,0);	//HalPushButton(-90,v,-10,v+20,"OstatkiSKartinkamiRn","Запуск");  EndWindow;end;window SalesWithImagesRClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real h,v,vs;  WindowBegin("Отчет по продажам с картинками",SalesWithImagesRClass,CGEcW,RcType);  SetWRect(20,80,440,150);  vs = 20;  h=100;  v = 6; vs = 20; h = 120;  PeriodField(h,v,"Период");  EditFieldTL(h,v+=vs,150,"Склад(магазин)",M4Str,Normal,41,f1,false,LocationSClass);  EditFieldTL(h,v+=vs,150,"Классификация",M4Str,Normal,200,f2,false,DISClass);  EditFieldTL(h,v+=vs,150,"Бренд",M4UStr,Normal,41,f4,false,DI2SClass);//carefull we run ARRn  //EditFieldTL(h,v+=vs,150,"Тип",M4UStr,Normal,41,f5,false,DI3SClass);//carefull we run ARRn  //EditField(h,v+=vs,-100,"IP",Normal,f6,false,0);	//HalPushButton(-90,v,-10,v+20,"ProdajiSKartinkamiRn","Запуск");  EndWindow;end;window RebLClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  WindowBegin("Таблицы скидок",RebLClass,CGmlist,RebView);  SpawnClass(RebDClass);  SetWRect(64,80,509,298);  Sizeable(-1,-1,0,0);  UseView(RebVc);  RecordList(4,17,-21,-39);  RlColKey(4,4,"Код",Code,false,Code);  RlCol(75,75, "Комментарий",Comment,false);  RlCol(-200,-200, "Заменяет",Replaces,false);  RlCol(-150,-150, "С даты",FromDate,false);  RlCol(-75,-75, "По дату",ToDate,false);  SearchField("Найти");  EndWindow;end;window PULabMyRClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real h,l,v,vm,mwn;  WindowBegin("Определите этикетки для документа",PULabMyRClass,CGRcW,RcType);  SetWRect(20,80,400,320);  DynamicWindow;  mwn = MotherWindow(CurWindow);  if (mwn>0) then begin    switch (GetWindowFileName(mwn)) begin      case "PUVc":        EditFieldTL(h=150,v=6,153,"Поступление",M4Str,ViewOnly,30,f1,false,0);      case "StockMovVc":        EditFieldTL(h=150,v=6,153,"Перемещение",M4Str,ViewOnly,30,f1,false,0);    end;  end;  if (IsEnterprise) then begin  ButtonFrame(h=100,vm=(v+=40) /*v=vm*/,l=160,5,"Размер");  RadioButton(h,v    ,6,0,"4*13 шт. 46*21 мм",ArtMode);  RadioButton(h,v+=16,7,0,"4*14 шт. 52*20 мм",ArtMode);  RadioButton(h,v+=16,0,0,"1x1 (Zebra)",ArtMode); //Edit***************************Sasha2,13:40 07.08.2015  CheckBox(h,v+=16,0,"Включить в печать товары малоцен.(Zebra)",flags[2]);end;  EndWindow;end;window MarketingDClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real h1,h2,v,vs,l;  WindowBegin("Фиксация визита",MarketingDClass,CGview,-);  SetWRect(64,80,850,680);  Sizeable(-1,-1,0,0);  UseView(MarketingVc);  vs = 20; h1 = 50; h2 = 260;  ActiveFieldOnNew("Name");  EditField(h1,v=16,60,"Номер",ViewOnly,SerNr,false,0);    v = 70; h1 = h1 + 40;  ButtonFrame(h1,v,l=110,2,"");  RadioButton(h1,v,0,0,"Клиент",CustCodeType);  RadioButton(h1,v+=16,1,0,"Доверенное лицо",CustCodeType);    v = 25; h1 = h1 + 140;  ButtonFrame(h1,v,l=110,6,"Пол");  RadioButton(h1,v,0,0,"-",Gender);  RadioButton(h1,v+=16,1,0,"Мужчина",Gender); StaticText(h1+140,v+12,"Кол-во",false);  RadioButton(h1,v+=16,2,0,"Женщина",Gender); EditField(h1+140,v,40,"",Normal,GenderQty,false,0);  RadioButton(h1,v+=16,3,0,"Смешанная группа",Gender);   RadioButton(h1,v+=16,4,0,"Группа мужчин",Gender);  RadioButton(h1,v+=16,5,0,"Группа женщин",Gender);  v = 25; h1 = h1+220;  ButtonFrame(h1,v,l=160,5,"Гражданство");  RadioButton(h1,v,0,0,"-",NationalityRbtn);  RadioButton(h1,v+=16,1,0,"Гражданин Азербайджана",NationalityRbtn);  RadioButton(h1,v+=16,2,0,"Иностранный турист",NationalityRbtn);  RadioButton(h1,v+=16,3,0,"Экспат",NationalityRbtn);  RadioButton(h1,v+=16,4,0,"Сотрудники ID Group",NationalityRbtn);    v = 25; h1 = h1 + 200;  ButtonFrame(h1,v,l=50,8,"Возраст");  RadioButton(h1,v,0,0,"-",Age);  RadioButton(h1,v+=16,1,0,"13-17",Age);  RadioButton(h1,v+=16,2,0,"18-24",Age);  RadioButton(h1,v+=16,3,0,"25-34",Age);  RadioButton(h1,v+=16,4,0,"35-44",Age);  RadioButton(h1,v+=16,5,0,"45-54",Age);  RadioButton(h1,v+=16,6,0,"55-64",Age);  RadioButton(h1,v+=16,7,0,"65+",Age);    v = v + 5;  //EditField(h1+30,v-3,120,"",Normal,NationalityTxt,false,0);    v = 90;  h1 = 100;    EditField(h1,v+=vs,70,"Код Клиента",Normal,CustCode,false,CUSClass);  EditField(h1+290,v+=vs,230,"Имя",Normal,Name,false,0);  EditField(h1+290,v+=vs,80,"Дата",Normal,TransDate,false,PasteCurDate);  EditField(h1+440,v,80,"Время",Normal,TransTime,false,);  EditField(h1+290,v+vs,80,"Консультант",Normal,SalesMan,false,UserSClass);  EditField(h1+440,v+vs,80,"Магазин",Normal,Location,false,LocationSClass);  EditField(h1+570,v+vs,80,"Л.Маш.",Normal,LocalMachine,false,LocalMachineSClass);  v = v -vs;  EditField(h1,v,100,"Моб. Телефон",Normal,Phone3,false,0);  HalPushButton(h1+110,v-5,h1+210,v+15,"MarketingSeachCustomerDsm","Искать клиента");  EditField(h1,v+=vs,100,"Доп. телефон",Normal,Phone2,false,0);  HalPushButton(h1+110,v+5,h1+210,v+25,"MarketingCreateCustomerDsm","Создать клиента");  EditField(h1,v+=vs,100,"Телефон",Normal,Phone1,false,0);  EditField(h1,v+=vs,-50,"Адрес",Normal,Address,false,0);  EditField(h1,v+=vs,120,"e-Mail",Normal,eMail,false,0);        h1 = 120;    //EditField(h1,v+=vs,-50,"Причина посещения",Normal,Reason,false,0);  v = v+vs;    h1 = 100;  /*v = 320+vs;  ButtonFrame(h1,v,l=200,3,"Город");  RadioButton(h1,v,0,0,"-",CityRbtn);  RadioButton(h1,v+=16,2,0,"Баку",CityRbtn);///Номера с 2 для городов  RadioButton(h1,v+=16,1,0,"Другой",CityRbtn);//Всегда 1	v = v + 5;  EditField(h1+70,v-3,100,"",Normal,CityTxt,false,0);*/      h1 = h1 + 220;  v = 230;  ButtonFrame(h1,v,l=190,14,"Откуда узнали");  RadioButton(h1,v,0,0,"-",ReferenceRbtn);  RadioButton(h1,v+=16,1,0,"Facebook",ReferenceRbtn);  RadioButton(h1,v+=16,2,0,"Instagram",ReferenceRbtn);  RadioButton(h1,v+=16,11,0,"E-mail рассылка",ReferenceRbtn);  RadioButton(h1,v+=16,12,0,"SMS рассылка",ReferenceRbtn);  RadioButton(h1,v+=16,13,0,"Мероприятие",ReferenceRbtn);  RadioButton(h1,v+=16,14,0,"Проходил мимо",ReferenceRbtn);  RadioButton(h1,v+=16,15,0,"Обзвон клиентов",ReferenceRbtn);  RadioButton(h1,v+=16,3,0,"Веб-сайт",ReferenceRbtn);  																										EditField(h1+70,v-2,120,"",Normal,ReferenceTxtWeb,false,0);  RadioButton(h1,v+=16,4,0,"Уличная реклама",ReferenceRbtn);  RadioButton(h1,v+=16,5,0,"Журнал",ReferenceRbtn);																											EditField(h1+70,v-2,120,"",Normal,ReferenceTxtMag,false,0);  RadioButton(h1,v+=16,6,0,"Рекомендация друга",ReferenceRbtn);  RadioButton(h1,v+=16,7,0,"Увидел в торговом центре",ReferenceRbtn);  RadioButton(h1,v+=16,8,0,"Радио",ReferenceRbtn);  RadioButton(h1,v+=16,9,0,"Телевидение",ReferenceRbtn);    RadioButton(h1,v+=16,10,0,"Others...",ReferenceRbtn);	v = v + 5;  EditField(h1+70,v-3,120,"",Normal,ReferenceTxt,false,0);    v = 210+vs;  ButtonFrame(h1+220,v,l=300,7,"Причина посещения");  RadioButton(h1+220,v,0,0,"-",ReasonBtn);  RadioButton(h1+220,v+=16,1,0,"Поиск подарка",ReasonBtn);  RadioButton(h1+220,v+=16,2,0,"Поиск для себя лично",ReasonBtn);  RadioButton(h1+220,v+=16,3,0,"Посмотреть товары, прицениться",ReasonBtn);  //RadioButton(h1+220,v+=16,4,0,"Познакомиться с магазином",ReasonBtn);  RadioButton(h1+220,v+=16,5,0,"Пришел по акции",ReasonBtn);  RadioButton(h1+220,v+=16,7,0,"Возврат товара",ReasonBtn);  RadioButton(h1+220,v+=16,8,0,"Оплата долга",ReasonBtn);  RadioButton(h1+220,v+=16,6,0,"Others...",ReasonBtn);	v = v + 5;  EditField(h1+290,v-3,-20,"",Normal,Reason,false,0);    v = v+2*vs;  ButtonFrame(h1+220,v,l=150,6,"Тип продажи");  RadioButton(h1+220,v,0,0,"Нет продажи",SaleType);  RadioButton(h1+220,v+=16,1,0,"Обычная продажа",SaleType);  RadioButton(h1+220,v+=16,2,0,"Продажа по звонку",SaleType);  RadioButton(h1+220,v+=16,3,0,"Продажа по Whatsapp",SaleType);  RadioButton(h1+220,v+=16,4,0,"Продажа по Instagram",SaleType);  RadioButton(h1+220,v+=16,5,0,"Продажа по Facebook",SaleType);    //Start edit Victor --------------------- 21.08     //h1 = h1 + 210;  v = 405+vs*5;  ButtonFrame(h1,v,l=300,3,"Результат");  RadioButton(h1,v,0,0,"-",ResultRbtn);  RadioButton(h1,v+=16,1,0,"Нет продаж: коммент.",ResultRbtn);  RadioButton(h1,v+=16,2,0,"Есть продажи: номера сч/ф",ResultRbtn);    EditField(h1+180,v - vs,100,"",Normal,ResultTxt,false,0);  EditField(h1+180,v,100,"",Normal,InvNr,false,0);    v = v + vs*2;  ButtonFrame(h1,v,l=300,4,"Использовалась карта");  RadioButton(h1,v,0,0,"-",AnotherCard);  RadioButton(h1,v+=16,1,0,"Чужая карта",AnotherCard);  EditField(h1+90,v,200,"",Normal,AnotherCardNr,false,0);  RadioButton(h1,v+=16,2,0,"Своя карта",AnotherCard);  RadioButton(h1,v+=16,3,0,"Нет карты",AnotherCard);    //End Edit    h1 = 10;  v = 230+vs;  StaticText(h1,v+=vs,"Каким товаром интересовался?",false);  TextField(h1,v+=15,300,-16,Math,0);    EndWindow;end;window MarketingLClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  WindowBegin("Регистрация клиентов",MarketingLClass,CGmlist,-);  SpawnClass(MarketingDClass);  SetWRect(20,80,1100,298);  Sizeable(-1,-1,0,0);  UseView(MarketingVc);  RecordList(4,17,-21,-39);  RlColKey(4,2,"No.",SerNr,false,SerNr);  RlColKey(50,50,"Дата",TransDate,false,TransDate);  RlCol(150,150,"Время",TransTime,false);  RlColKey(250,250,"Имя",Name,false,Name);  RlColKey(-150,-150,"Магазин",Location,false,Location);  RlColKey(-75,-75,"Локальная машина",LocalMachine,false,LocalMachine);  SearchField("Search");  EndWindow;end;window ObjMainRClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real h,h1,h2,h3,hacc,v,vm,vs;  Integer tilenr;  WindowBegin("Определите отчет оборота по объектам",ObjMainRClass,CGRcW,RcType);  UseView(RcVc);  SetWRect(20,80,600,380);	h = 100;  vs = 20;  hacc = 342;  PeriodField(h,v=6,"Период");  EditFieldTL(h,v+=vs,150,"Счет",M4UStr,Normal,60,f4,false,AccSClass);     v = v+20;    EditFieldTL(h,v,250,"Объект",M4UStr,Normal,60,ObjStr,false,ObjSClass);  EditFieldTL(h,v+=vs,50,"Тип объекта",M4UStr,Normal,5,ObjType,false,OTSClass);    EndWindow;end;window UnPayPORClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real h,h1,h2,h3,hacc,v,vm,vs;  Integer tilenr;  WindowBegin("Определите отчет по неоплаченным заказам поставщика",UnPayPORClass,CGRcW,RcType);  UseView(RcVc);  SetWRect(20,80,600,380);	h = 100;  vs = 20;  hacc = 342;  EditFieldTL(h,v+=vs,150,"Поставщик",M4UStr,Normal,60,f1,false,VESClass);   EndWindow;end;window CleaningVClass:1 //Edit--------------------------------Dima 24.12.2014 wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer") begin  real h,v,vs;  WindowBegin("Удалить первичные документы",CleaningVClass,CGMnt,RcType);  SetWRect(20,120,360,750);  v = 10;  h = 25; vs = 16;  StaticText(h-10,v,"Будут удалены все записи из регистров:",false);  StaticText(h,v+=vs,"Приход",false);  StaticText(h,v+=vs,"Расход",false);  StaticText(h,v+=vs,"Платежи клиентов",false);  StaticText(h,v+=vs,"Платежи поставщикам",false);  StaticText(h,v+=vs,"Счета-фактуры",false);  StaticText(h,v+=vs,"Счета-фактуры поставщиков",false);  StaticText(h,v+=vs,"Заказы поставщикам",false);  StaticText(h,v+=vs,"Отгрузки",false);  StaticText(h,v+=vs,"Поступления",false);  StaticText(h,v+=vs,"Списания",false);  StaticText(h,v+=vs,"Перемещения товаров",false);  StaticText(h,v+=vs,"Возвраты товаров",false);  StaticText(h,v+=vs,"Возвраты поставщикам",false);  StaticText(h,v+=vs,"Счета клиентам",false);  StaticText(h,v+=vs,"Записи операций",false);  StaticText(h,v+=vs,"Начальное сальдо",false);  StaticText(h,v+=vs,"История товаров",false);  StaticText(h,v+=vs,"Статус товаров",false);  StaticText(h,v+=vs,"Выплаты персоналу",false);  EndWindow;end;window ObjInitBalRClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real h,v,vs;    WindowBegin("Для внесения начального сальдо по объектам",ObjInitBalRClass,CGRcW,RcType);  UseView(RcVc);  SetWRect(20,80,440,150);  h = 100;  vs = 20;  PeriodField(h,v=6,"Период");  EditFieldTL(h,v+=vs,150,"Объект",M4UStr,Normal,60,ObjStr,false,ObjSClass);  EndWindow;end;window LinkIVVClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real h,v,vs;  string 255 label;  WindowBegin("Привязать счет-фактуру",LinkIVVClass,CGMnt,RcType);  SetWRect(20,100,400,300);  v = 6; vs = 20; h = 150;  EditField(h,v, 80,"Номер счет-фактуры",Normal,f1,false,0);  EndWindow;end;window NewINDClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  integer tilenr,flipnr,f;  real h,h1,h2,h3,h4,h5,v,vm,vs,pos,matrixwidth,classtab,wdth; //Edit***************************Sasha2,10:40 16.12.2015  string 255 label;  Boolean toggleview;    WindowBegin("Новые товары",NewINDClass,CGview,-);    toggleview = CompanyIsJWLikeCompany(CurrentCompany);    if (toggleview) then begin //Edit***************************Sasha2,10:40 16.12.2015 {    matrixwidth = 1230;  end else begin    matrixwidth = 830;  end; //Edit***************************Sasha2,10:40 16.12.2015 }  SetWRect(20,80,matrixwidth,400);//##cc //Edit***************************Sasha2,10:41 16.12.2015  Sizeable(-1,-1,-1,0);  UseView(NewINVc);  Tile(0,87,false,"",SerNr);   v = 6; vs = 20; h = 155; h1 = 300; h2 = 385; h3 = 395; h4 = 285; h5 = 433;  EditField(h,v, 150,"Номер",Normal,SerNr,false,0);  if (toggleview) then begin //Edit***************************Sasha2,11:34 25.12.2015 {    EditField(h2,v,80,"Бренд",Normal,Brand,false,DI2SClass);  end else begin //Edit***************************Sasha2,11:34 25.12.2015 }    EditField(h2,v,80,"Группа",Normal,Group,false,ITSClass);  end;  EditField(h5+130,v,80,"Пользователь",ViewOnly,SalesMan,false,0);  v=v+vs;  EditField(h5+130,v,80,"Дата",ViewOnly,TransDate,false,PasteCurDate);  CheckBox(-110,v,0,"Создать товары",OKFlag);    //EditField(h,v+=vs,-40,"Наименование",Normal,Name,false,0);  tilenr = 1;  TileButton(tilenr,"Цена"); tilenr = tilenr + 1;	TileButton(tilenr,"Ювелир."); tilenr = tilenr + 1; 	//TileButton(tilenr,"Часы"); tilenr = tilenr + 1;  TileButton(tilenr,"Склад"); tilenr = tilenr + 1;  //TileButton(tilenr,"Упр. складом"); tilenr = tilenr + 1;  //TileButton(tilenr,"Стоимость"); tilenr = tilenr + 1;  TileButton(tilenr,"Структура"); tilenr = tilenr + 1;  TileButton(tilenr,"Счета"); tilenr = tilenr + 1;  //TileButton(tilenr,"Варианты"); tilenr = tilenr + 1;  //TileButton(tilenr,"Модель ст-ти"); //tilenr = tilenr + 1;  TileButton(tilenr,"Матрица"); tilenr = tilenr + 1;  tilenr = 1;  //CheckBox(h,v+=vs,0,"Закрыт",Terminated);  //CheckBox(h2,v,0,"Не для продажи",NotForSales);    /*Цена*/  Tile(tilenr,209,false,tilenr,Unittext); tilenr = tilenr + 1;		EditField(h,v=6 ,100,"Единица измерения",Normal,Unittext,false,UnitSClass);		//EditField(h,v+=vs,100,"Базовая цена",Normal,UPrice1,true,0);		//EditField(h,v+=vs,100,"Изменение баз. цены",ViewOnly,LastBasePriceChange,true,0);		//EditField(h,v+=vs,100,"Фактор цены",Normal,PriceFactor,true,0);		//EditField(h,v+=vs,100,"Формула тов.",Normal,CalcPrice,false,CPMSClass);		//EditField(h,v+=vs,100,"Наценка, %",Normal,Markup,true,0);		//EditField(h,v+=vs,100,"% премии",Normal,Bonus,true,0);		EditField(h,v+=vs,-240,"Объекты",Normal,Objects,false,ObjSClass);		EditField(h,v+=vs,-240,"Классификация",Normal,DispGroups,false,DISClass);		ButtonFrame(/*h5+150*/-200,v=24,130,4,"Тип товара");//##cc		RadioButton(/*h5+150*/-200,v,kItemTypePlain,0,"Свободный",ItemType);		RadioButton(/*h5+150*/-200,v+=16,kItemTypeStocked,0,"Складируемый",ItemType);		RadioButton(/*h5+150*/-200,v+=16,kItemTypeStructured,0,"Структурированный",ItemType);		RadioButton(/*h5+150*/-200,v+=16,kItemTypeService,0,"Работа",ItemType);		//CheckBox(h1,v+=32,0,"В проекте товар как материал",ItemMaterial);/*Ювелир*/	Tile(tilenr,110,false,tilenr,-); tilenr = tilenr + 1;		EditField(h,v=6, 140,"Метал",Normal,Metal,false,0); 		EditField(h,v+=vs, 140,"Вес",Normal,RowWeight,false,0); 		EditField(h,v+=vs, 140,"Размер",Normal,Size,false,0); 		//EditField(h,v+=vs, 140,"Длина",Normal,Length,false,0); 		EditField(h,v+=vs, 140,"Ссылка",Normal,Reference,false,0); 		v = 6; 		EditField(h5+50,v, 140,"Гл. камень детали (карат.)",Normal,MajStoneDet,false,0); // Edit ************************** Thursday, 11 April 2013 11:43:09		EditField(h5+50,v+=vs, 140,"Цвет",Normal,Colour,false,0); 		//EditField(h5+50,v+=vs, 140,"Прозрачность",Normal,Clarity,false,0); 		//EditField(h5+50,v+=vs, 140,"Сертификат",Normal,Cert,false,0); 		//EditField(h5+50,v+=vs, 140,"Мин. камень детали",Normal,MinStoneDet,false,0);/*Часы*/	/*Tile(tilenr,90,false,tilenr,-); tilenr = tilenr + 1;		EditField(h,v=6, 140,"Марка часов",Normal,WatchBrand,false,0); 		EditField(h,v+=vs, 140,"Наим. стиля",Normal,StyleName,false,0); 		EditField(h,v+=vs, 140,"Метал часов",Normal,WatchMetal,false,0); 		EditField(h,v+=vs, 140,"Движение",Normal,Movement,false,0); 		v = 6; 		EditField(h5,v, 140,"Браслет/ремешок",Normal,BrcStr,false,0); 		EditField(h5,v+=vs, 140,"Род",Normal,Gender,false,0); 		EditField(h5,v+=vs, 140,"Проч.",Normal,Other,false,0); 		EditField(h5,v+=vs, 140,"Проч.2",Normal,Other2,false,0); *//*Склад*/  Tile(tilenr,170,false,tilenr,SerNrf);  tilenr = tilenr + 1; // Need to clean this Tile up!		v = 6;		vm = v;		ButtonFrame(h1,v+=14,143,3,"Серийные номера");//##cc		RadioButton(h1,v,0,0,"нет",SerNrf);		RadioButton(h1,v+=16,1,0,"на единицу",SerNrf);		RadioButton(h1,v+=16,2,0,"на партию",SerNrf);		//CheckBox(h1+200,v,0,"Не требовать номер партии на сч/ф POS",DonotRequireBatchNrOnIVCash);		/*EditField(h,v=6,100,"Мин. кол-во на скл.",Normal,MinLevel,true,0);		EditField(h,v+=vs,100,"Макс. кол-во на складе",Normal,MaxLevel,true,0);		EditField(h,v+=vs  ,100,"Отдел",Normal,Department,false,DepSClass);		EditField(h,v+=vs  ,100,"Полка",Normal,InvCode,false,0);		EditField(h,v+=vs,100,"Источник по умолч.",Normal,DefaultSource,false,SourceSClass);  		EditField(h5,v ,50,"Налог на окр. среду/кг",Normal,RepaPricePerWeight,true,0);		EditField(h,v+=vs ,100,"Степень риска",Normal,HazLevCode,false,HazLevSClass);		EditField(h5,v ,50,"% алкоголя",Normal,AlcPrc,true,0);		EditField(h,v+=vs ,100,"Единица 2",Normal,Unittext2,false,UnitSClass);		EditField(h5,v ,50,"Конвертация 1",Normal,Conversion1,true,0);		EditField(h,v+=vs,100,"Коэфф-нт единицы",Normal,UnitCoefficient,true,0);		EditField(h5,v ,50,"Конвертация 2",Normal,Conversion2,true,0);*//*Упр. складом*/  /*Tile(tilenr,170,false,tilenr,LocArea);  tilenr = tilenr + 1;		EditField(h,vm=(v=6) ,100,"Товар паллеты",Normal,DefPalletItem,true,INSClass);		EditField(h5,v ,80,"Участок погрузки",Normal,PickArea,false,LocAreaSClass);		EditField(h,v+=vs ,100,"Участ. склада по умолч.",Normal,LocArea,false,LocAreaSClass);		EditField(h5,v ,50,"Паллет на участке погрузки",Normal,PalletsInPickArea,true,0);		EditField(h,v+=vs ,50,"Макс. кол. на паллете",Normal,QtyonPallet,true,0);		EditField(h4,v ,50,"Слои в палл.",Normal,PalletLayers,true,0);		EditField(h5,v ,50,"Кол-во в слое",Normal,QtyonPalletLayer,true,0);		EditField(h,v+=vs ,50,"Ширина паллеты",Normal,PalletWidth,true,0);		EditField(h4,v ,50,"Высота",Normal,PalletHeight,true,0);		EditField(h5,v ,50,"Глубина",Normal,PalletDepth,true,0);		EditField(h,v+=vs ,50,"Ширина места по умолч.",Normal,DefPosWidth,true,0);		EditField(h4,v ,50,"Высота",Normal,DefPosHeight,true,0);		EditField(h5,v ,50,"Глубина",Normal,DefPosDepth,true,0);		EditField(h,v+=vs ,50,"Ширина",Normal,Width,true,0);		EditField(h4,v ,50,"Высота",Normal,Height,true,0);		EditField(h5,v ,50,"Глубина",Normal,Depth,true,0);		EditField(h,v+=vs ,50,"Объем",Normal,Volume,true,0);		EditField(h4,v ,50,"Плотность",Normal,Density,true,0);		EditField(h5,v ,50,"Нетто",Normal,NetWeight,true,0);		EditField(h5,v+=vs ,50,"Вес",Normal,Weight,true,0);*//*Стоимость*/  //Tile(tilenr,190,false,tilenr,InPrice);  tilenr = tilenr + 1;		//EditField(h+38,vm=(v=6),100,"Стоимость",Normal,InPrice,true,0); //##cc		/*EditField(h5,v,70,"Изменение стоимости",ViewOnly,LastPriceChange,true,0);		EditField(h+38,v+=vs ,100,"Стоимость в осн. вал. 2",Normal,InPriceB2,true,0); //##cc		ButtonFrame(h1,v+=24,264,4,"Изменять ст-ть при поступлении"); //##cc		RadioButton(h1,v,0,0,"не изменять",UpdateCost);		RadioButton(h1,v+=16,1,0,"на ст-ть последней покупки, вкл.накл.затр.",UpdateCost);		RadioButton(h1,v+=16,2,0,"на средневзвешенную",UpdateCost);		RadioButton(h1,v+=16,3,0,"на цену последней покупки(искл.накл.затр.)",UpdateCost);		ButtonFrame(h5=580,v=v-3*16,200,3,"Обнов. стоим. затрат по переоц. склада"); //##cc		RadioButton(h5,v,0,0,"не обновлять",SRUpdateCost);		RadioButton(h5,v+=16,1,0,"стоим. последн. переоценки",SRUpdateCost);		RadioButton(h5,v+=16,2,0,"средневзвешенная",SRUpdateCost);		EditField(h+38,v=vm+2*vs,100,"Накладные расходы",Normal,ExtraCost,true,0); //##cc		EditField(h+38,v+=vs ,100,"Средневзвешенная",Normal,WeighedAvPrice,true,0); //##cc		EditField(h+38,v+=vs ,100,"Средневзв. в осн.вал.2",Normal,WeighedAvPriceB2,true,0); //##cc		EditField(h+38,v+=vs ,100,"Ст.посл.покупки(вкл.накл.затр.)",Normal,LastPurchPrice,true,0); //##cc		EditField(h+38,v+=vs ,100,"Ц. посл.покупки(искл.накл.затр.)",Normal,LastPurchPrice2,true,0); //##cc*/		//EditField(h+38,v+=vs ,100,"Валюта посл. покупки",Normal,LastPurchCurncyCode,false,CurncyCodeSClass); //##cc		/*EditField(h+38,v+=vs ,100,"Фиксированный фрахт",Normal,FixedFreight,true,0); //##cc		CheckBox(h1,v,0,"Включать фиксированный сбор на товар",InclItemFreight);*//*Структура*/  Tile(tilenr,170,false,tilenr,Recepy);  tilenr = tilenr + 1;		//EditField(h,v=6 ,120,"Структура",Normal,Recepy,false,RecSClass);		//CheckBox(h1,v,0,"Разбивать на компоненты при вводе",ExplodeRec);		//EditField(h,v+=vs ,120,"Структура в сч/ф",Normal,InvRecepy,false,RecSClass);		EditField(h2,v=6,150,"Штрих-код",Normal,BarCode,false,0);		//EditField(h,v+=vs ,120,"Товар контракта",Normal,ContractItem,false,INSClass);		//EditField(h2,v+=vs,150,"Код произв-ля",Normal,EUCodex,false,CommoditySClass);		//EditField(h,v+=vs ,120,"Арендное фактур.",Normal,RentalItem,false,INSClass);		EditField(h2,v+=vs,150,"Код EKN",Normal,EKNCode,false,0); // i think it is same as Commodity Code		EditField(h2,v+=vs,150,"ПП Код",Normal,CPSCode,false,0);// Edit ************************** Monday, 3 September 2012 09:29:01		//EditField(h,v+=vs ,120,"Гарантия, мес.",Normal,WarrantyLength,true,0);		//EditField(h2,v,150,"Цвет",Normal,colnr,false,SetSClass);		EditField(h,v+=vs,-40,"Альтернативный код",Normal,AlternativeCode,false,0);		//EditField(h,v+=vs,-40,"Предупреждение",Normal,WarnText1,false,0);/*Счета*/  Tile(tilenr,170,false,tilenr,SalesAcc);  tilenr = tilenr + 1;		v = 6;		vm = v;		/*EditField(h,vm,55,"Счет реализации",Normal,SalesAcc,false,AccSClass);		EditField(h,v+=vs,55,VATZoneNameRUS & "Счет реализации, ",Normal,EUSalesAcc,false,AccSClass);		EditField(h,v+=vs,55,"Счет реализации, эксп.",Normal,ExpSalesAcc,false,AccSClass);		EditField(h,v+=vs,55,"Серв. фактур. счет реал.",Normal,SVOInvbleSalesAcc,false,AccSClass); 		EditField(h,v+=vs,55,"Серв. гар. счет реал.",Normal,SVOWarrantySalesAcc,false,AccSClass); 		EditField(h,v+=vs,55,"Серв. контракт счет реал.",Normal,SVOContractSalesAcc,false,AccSClass); 		EditField(h,v+=vs,55,"Серв. гудвил счет реал.",Normal,SVOGoodwillSalesAcc,false,AccSClass); 		EditField(h,v+=vs,55,"Исп. компонент-в",Normal,CompUsage,false,AccSClass);		EditField(h2=360,v=vm,55,"Внутр. счет стоим.",Normal,CostAcc,false,AccSClass);		EditField(h2,v+=vs,55,VATZoneNameRUS & "Счет стоимости",Normal,EUCostAcc,false,AccSClass);		EditField(h2,v+=vs,55,"Счет затрат, эксп.",Normal,ExpCostAcc,false,AccSClass);		EditField(h2,v+=vs,55,"Серв. фактур. счет затрат",Normal,SVOInvbleCostAcc,false,AccSClass); 		EditField(h2,v+=vs,55,"Серв. гар. счет затрат",Normal,SVOWarrantyCostAcc,false,AccSClass); 		EditField(h2,v+=vs,55,"Серв. контракт счет затр.",Normal,SVOContractCostAcc,false,AccSClass); 		EditField(h2,v+=vs,55,"Серв. гудвил счет затрат",Normal,SVOGoodwillCostAcc,false,AccSClass); 		EditField(h2,v+=vs,55,"Отель - временный счет",Normal,HotelWIPAcc,false,AccSClass);*/		EditField(h2=530,v=vm,40,"Код НДС",Normal,VATCode,false,VATCodeSClass);		/*EditField(h2,v+=vs,20,VATZoneNameRUS & "Код НДС",Normal,VATCodeEU,false,VATCodeSClass);		EditField(h2,v+=vs,20,"Код НДС, эксп.",Normal,VATCodeExp,false,VATCodeSClass);		CheckBox(h2,v+=20,0,"Вычислять налоговые сборы",Perceptions);		CheckBox(h2,v+=16,0,"Вычислять удерживаемые налоги",Withholdings);		EditField(h2=670,v=vm,50,"Ш-н расч. нал",Normal,TaxTemplateCode,false,TaxTemplateSClass);		EditField(h2,v+=vs,50,VATZoneNameRUS & "ш-н расч. нал",Normal,TaxTemplateCodeEU,false,TaxTemplateSClass);		EditField(h2,v+=vs,50,"Экс. ш-н расч. нал",Normal,TaxTemplateCodeExp,false,TaxTemplateSClass);*//*Варианты*/  /*Tile(tilenr,70,false,tilenr,VARMask);  tilenr = tilenr + 1;		EditField(h,v=6,-40,"Маска варианта",Normal,VARMask,false,VARMasksSClass);		EditField(h,v+=vs,-40,"Порядок в отчете",Normal,VARRepOrder,false,VARMasksSClass);		EditField(h,v+=vs,-40,"Подмножества",Normal,VARSubsets,false,VARSubsetsSClass);*//*Модель ст-ти*/	/*Tile(tilenr,220,false,tilenr,CostPerc);  tilenr = tilenr + 1;		ButtonFrame(h=100,vm=(v=20),230,6,"Первичная модель стоимости");		RadioButton(h,v,0,0,"По умолчанию",PrimaryCostModel);		RadioButton(h,v+=16,1,0,"Стоимость покупки",PrimaryCostModel);		RadioButton(h,v+=16,2,0,"% _от базовой цены",PrimaryCostModel);		EditField(h+150,v,55,"%",Normal,CostPerc,true,0);		RadioButton(h,v+=16,3,0,"Средневзвешенная",PrimaryCostModel);		RadioButton(h,v+=16,4,0,"По очереди",PrimaryCostModel);		RadioButton(h,v+=16,kCostModelNoneItem,0,"Нет",PrimaryCostModel);		ButtonFrame(h,v+=40,230,3,"Модель стоимости по очереди");		RadioButton(h,v,0,0,"По умолчанию",QueuedCostModel);		RadioButton(h,v+=16,1,0,"FIFO цена",QueuedCostModel);		RadioButton(h,v+=16,2,0,"LIFO цена",QueuedCostModel);  		ButtonFrame(h2=380,v=vm,250,3,"Стоимость на серийный номер");//##cc		RadioButton(h2,v,0,0,"По умолчанию",FIFOPerSerialNr);		RadioButton(h2,v+=16,1,0,"Стоимость не на серийный номер",FIFOPerSerialNr);		RadioButton(h2,v+=16,2,0,"Стоимость на серийный номер",FIFOPerSerialNr);  		ButtonFrame(h2,v+=40,250,3,"Стоимость по очереди по каждому складу");//##cc		RadioButton(h2,v,0,0,"По умолчанию",FIFOPerLocation);		RadioButton(h2,v+=16,1,0,"Стоимость по очереди не по складам",FIFOPerLocation);		RadioButton(h2,v+=16,2,0,"Стоимость по очереди по каждому складу",FIFOPerLocation);  		ButtonFrame(h2,v+=40,250,3,"Средневзвешенная по каждому складу");//##cc		RadioButton(h2,v,0,0,"По умолчанию",WAPerLocation);		RadioButton(h2,v+=16,1,0,"Средневзвешенная не по складам",WAPerLocation);		RadioButton(h2,v+=16,2,0,"Средневзвешенная по каждому складу",WAPerLocation);  */		/*Матрица*/	Tile(tilenr,400,true,tilenr,-);  tilenr = tilenr + 1;				if (toggleview) then begin //Edit***************************Sasha2,10:38 16.12.2015 {  		MatrixBegin(3,v+=32,-76,-20,-,1000);  		Flip(0);  		MatCol(1,28,"Товар",0,Code,false,INSClass);  		flipnr = 1;  		Flip(flipnr); flipnr = flipnr + 1;			MatCol(1,130,"Наименование",0,Name,false,0);			//MatCol(1,-500,"Классификация",0,DispGroups,false,DISClass);      MatCol(1,-400,"Штрих-код",0,BarCode,false,0);      MatCol(1,-250,"Код поставщика",0,AlternativeCode,false,0);      MatCol(1,-100,"Тип изд.",0,Type,false,TypeDISClass);  		Flip(flipnr); classtab = flipnr; flipnr = flipnr + 1;  		pos = 100;  		wdth = 95;  		//MatCol(1,pos,"Brand",0,BrandSC,false,TypeDISClass);  //"WTCH"  		MatCol(1,pos,"Collection",0,classif30,false,TypeDISClass);  		//MatCol(1,pos+=wdth,"Style",0,Style,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Gender",0,GenderSC,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Dial",0,Dial,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Strap",0,Strap,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Material",0,classif33,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Mechanism",0,Mechanism,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Function",0,Function,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Diameter",0,Diameter,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Serial allowance",0,SerNrf,false,SetSClass);  		MatCol(1,pos+=wdth,"WarrCard",0,WatchType,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Type",0,Type,false,TypeDISClass);  		Flip(flipnr); flipnr = flipnr + 1;  		pos = 105;  		wdth = 73;  		//MatCol(1,pos,"Brand",0,BrandSC,false,TypeDISClass); //"JEWE"  		MatCol(1,pos,"Collection",0,Collection,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Category",0,Category,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Division",0,Division,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Gender",0,GenderSC,false,TypeDISClass);      MatCol(1,pos+=wdth,"Material",0,Material,false,TypeDISClass);  		MatCol(1,pos+=wdth,"WeightOfMat",0,WeightOfMat,false,TypeDISClass);  		MatCol(1,pos+=wdth,"DiamondsCarat",0,DiamondsCarat,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Center stones",0,SolidStones05,false,TypeDISClass);  		MatCol(1,pos+=wdth,"PrecAndSemiPrec",0,PrecAndSemiPrec,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Style",0,Style,false,TypeDISClass);  		MatCol(1,pos+=wdth,"RingSizes",0,RingSizes,false,TypeDISClass);  		MatCol(1,pos+=wdth,"SAP code",0,WaterResist,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Comment",0,PrecStones,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Type",0,Type,false,TypeDISClass);  		Flip(flipnr); flipnr = flipnr + 1;  		pos = 100;  		wdth = 220;  		//MatCol(1,pos,"Brand",0,BrandSC,false,TypeDISClass); //"STON"  		MatCol(1,pos,"Carat",0,Carat,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Clarity",0,ClaritySC,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Color",0,Color,false,TypeDISClass);  		MatCol(1,pos+=wdth,"ShapeCut",0,ShapeCut,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Type",0,Type,false,TypeDISClass);   		Flip(flipnr); flipnr = flipnr + 1;  		pos = 100;  		wdth = 135;  		//MatCol(1,pos,"Brand",0,BrandSC,false,TypeDISClass); //"ACCE"  		MatCol(1,pos,"Collection",0,classif31,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Category",0,Diamonds,false,TypeDISClass);  		//MatCol(1,pos+=wdth,"Description",0,Description,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Art",0,Art,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Style",0,classif32,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Material",0,classif34,false,TypeDISClass);  		MatCol(1,pos+=wdth,"ColorOfMat",0,ColorOfMat,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Gender",0,GenderSC,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Type",0,Type,false,TypeDISClass);  		EndMatrix;  		vs = 22;  		v = v+1;   		for (f=1;f<flipnr;f=f+1) begin  		  if (f>=classtab and f<=(classtab+3)) then begin  		    switch (f-classtab) begin  		      case 0: VTab(-56,v,-6,v+vs,ToolFlip,f,"WTCH");   		      case 1: VTab(-56,v,-6,v+vs,ToolFlip,f,"JEWE");   		      case 2: VTab(-56,v,-6,v+vs,ToolFlip,f,"STON");   		      case 3: VTab(-56,v,-6,v+vs,ToolFlip,f,"ACCE");   		    end;  		  end else begin  		    VTab(-56,v,-6,v+vs,ToolFlip,f,chr(asc("A") + f - 1));   		  end;  			v = v + vs;  		end;		end else begin //Edit***************************Sasha2,10:38 16.12.2015 }		  MatrixBegin(3,v+=32,-46,-20,-,1000);		  Flip(0);  		MatCol(1,28,"Товар",0,Code,false,INSClass);  		flipnr = 1;  		Flip(flipnr); flipnr = flipnr + 1;  			MatCol(1,130,"Наименование",0,Name,false,0);  			MatCol(1,400,"Группа",0,Group,false,ITSClass);  			MatCol(1,-280,"Единица измерения",0,Unittext,false,UnitSClass);  			//MatCol(1,-240,"Тип",0,ItemType,true,0);  			MatCol(1,-200,"Объекты",0,Objects,false,ObjSClass);  			MatCol(1,-120,"Классификация",0,DispGroups,false,DISClass);  		Flip(flipnr); flipnr = flipnr + 1;  		pos = 100;  		wdth = 65;  		MatCol(1,pos,"Бренд",0,BrandSC,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Модель",0,classif30,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Категория",0,Category,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Тип изд.",0,classif31,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Коллекция",0,Collection,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Металл",0,Metal,false,TypeDISClass);  		MatCol(1,pos+=wdth,"Вес",0,WeightOfMat,true,TypeDISClass);  		MatCol(1,pos+=wdth,"Размер",0,Size,true,TypeDISClass);  		MatCol(1,pos+=wdth,"Цвет",0,Colour,true,TypeDISClass);  		MatCol(1,-wdth,"Каратность",0,Carat,false,TypeDISClass);  		Flip(flipnr); flipnr = flipnr + 1;  		MatCol(1,130,"Наименование",0,Name,false,0);  		MatCol(1,-70,"Серийный учет",0,SerNrf,false,0);  		//MatCol(1,200,"Стоимость осн.вал.",0,InPrice,true,0);  		//MatCol(1,-240,"Валюта посл. покупки",0,LastPurchCurncyCode,true,CurncyCodeSClass);  		Flip(flipnr); flipnr = flipnr + 1;  		MatCol(1,100,"Штрих-код",0,BarCode,false,0);  		//MatCol(1,150,"Код произв-ля",0,EUCodex,true,0);  		MatCol(1,200,"Код EKN",0,EKNCode,false,0);  		MatCol(1,300,"ПП Код",0,CPSCode,false,0);  		MatCol(1,400,"Альтернативный код",0,AlternativeCode,false,0);  		Flip(flipnr); flipnr = flipnr + 1;  		MatCol(1,130,"Наименование",0,Name,false,0);  		MatCol(1,-160,"Себестоимость",0,LastPurchPrice2,false,0);  		MatCol(1,-80,"Валюта",0,LastPurchCurncyCode,false,CurncyCodeSClass);  		EndMatrix;  		vs = 22;  		v = v+1;   		for (f=1;f<flipnr;f=f+1) begin  			VTab(-35,v,-16,v+vs,ToolFlip,f,chr(asc("A") + f - 1));   			v = v + vs;  		end;		end;  EndWindow;end;window NewINLClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  WindowBegin("Новые товары",NewINLClass,CGmlist,RcType);  SetWRect(20,80,509,298);  SpawnClass(NewINDClass);  Sizeable(-1,-1,0,0);  UseView(NewINVc);  RecordList(4,17,-21,-39);  RlColKey(4,4,"Номер",SerNr,false,SerNr);  RlColKey(81,81,"Дата",TransDate,false,TransDate);  RlColKey(240,79,"Проведенно",OKFlag,false,OKFlag);  RlColKey(-150,-150,"Пользователь",SalesMan,false,SalesMan);  SearchField("Search");  EndWindow;end;window ExportINEClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin	//AppUseWindow(ImportAccInIClass);  WindowBegin("Экспорт товаров",ExportINEClass,CGEcW,RcType);  SetWRect(80,80,400,250);     EditField(120,40,-20,"Классификация",Normal,f1,false,DISClass);     EndWindow;end;window ImportPayIClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  WindowBegin("Імпорт платежів",ImportPayIClass,CGIcW,RcType);    SetWRect(80,80,300,150);          EndWindow;end;window ImportPLClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real v;  //AppUseWindow(ImportAccInIClass);  WindowBegin("Prices Import",ImportPLClass,CGIcW,RcType);  SetWRect(80,80,400,250);      StaticText(20,v=20,"Формат импорта:",false);   StaticText(25,v+=20,"* Прайс лист",false);   StaticText(25,v+=20,"* Артикул",false);   StaticText(25,v+=20,"* Цена",false);   StaticText(25,v+=20,"* Валюта (если отличается от валюты прайса)",false);	 StaticText(25,v+=20,"* Серийный номер (опционально)",false);	 	 StaticText(20,v+=40,"Поля в файле разделяются знаком TAB",false);  EndWindow;end;window ImportDiskTableLClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real v;  WindowBegin("Изменение скидок клиентов",ImportDiskTableLClass,CGIcW,RcType);  SetWRect(80,80,400,250);      StaticText(20,v=20,"Формат импорта:",false);   StaticText(25,v+=20,"* Код клиента",false);   StaticText(25,v+=20,"* Код таблицы скидок",false);	 	 StaticText(20,v+=40,"Поля в файле разделяются знаком TAB",false);  EndWindow;end;window ImportMyINClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real v;  WindowBegin("Items Import",ImportMyINClass,CGIcW,RcType);  SetWRect(80,80,400,350);      StaticText(20,v=20,"Формат импорта:",false);   StaticText(25,v+=20,"* Код товара",false);   StaticText(25,v+=20,"* Название",false);   StaticText(25,v+=20,"* ЕАН Код",false);   StaticText(25,v+=20,"* Альтернативный Код",false);   StaticText(25,v+=20,"* Цвет",false);   StaticText(25,v+=20,"* Размер",false);   StaticText(25,v+=20,"* Группа",false);	 StaticText(25,v+=20,"* Классфификация",false);	 	 StaticText(20,v+=40,"Поля в файле разделяются знаком TAB",false);  EndWindow;end;window INUpdatingCostsIClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  real v;  WindowBegin("Изменение себестоимости товаров",INUpdatingCostsIClass,CGIcW,-);	//Edit----------------------Dima  26.02.2015  SetWRect(80,80,400,250);      StaticText(20,v=20,"Формат импорта:",false);   StaticText(25,v+=20,"* Код товара",false);   StaticText(25,v+=20,"* Новая себестоимость",false);	 	 StaticText(20,v+=40,"Поля в файле разделяются знаком TAB",false);  EndWindow;end;window ImportOfRegisterRewriteIClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  WindowBegin("Импорт регистров",ImportOfRegisterRewriteIClass,CGIcW,RcType);  SetWRect(80,80,400,200);		 EditField(150,40,100,"Название регистра(Vc)",Normal,f1,false,0);     EndWindow;  end;window ImportOfRegisterIClass:1  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")begin  WindowBegin("Импорт регистров",ImportOfRegisterIClass,CGIcW,RcType);  SetWRect(80,80,400,200);		   EndWindow; end;